{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/eventrecorder/source/class/cboulanger/eventrecorder/Recorder.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "include",
    "cboulanger",
    "eventrecorder",
    "MHelperMethods",
    "MState",
    "construct",
    "__excludeIds",
    "__lines",
    "addGlobalEventListener",
    "target",
    "event",
    "isRunning",
    "id",
    "getAttribute",
    "Id",
    "getAbsoluteIdOf",
    "recordEvent",
    "properties",
    "mode",
    "check",
    "nullable",
    "init",
    "logEvents",
    "members",
    "__lastEventTimestamp",
    "__latInput",
    "excludeIds",
    "ids",
    "lang",
    "Type",
    "isArray",
    "found",
    "excluded",
    "substr",
    "length",
    "debug",
    "push",
    "getExcludedIds",
    "getScript",
    "join",
    "setScript",
    "script",
    "Assert",
    "assertString",
    "split",
    "beforeStart",
    "getMode",
    "document",
    "location",
    "host",
    "pathname",
    "concat",
    "Date",
    "toLocaleString",
    "createIntermediateCodeFromEvent",
    "afterStop",
    "getTrackEvents",
    "lines",
    "type",
    "getType",
    "data",
    "getData",
    "owner",
    "getQxOwner",
    "getLogEvents",
    "JSON",
    "stringify",
    "toString",
    "ui",
    "form",
    "DateField",
    "ComboBox",
    "VirtualComboBox",
    "tree",
    "FolderOpenButton",
    "FocusHandler",
    "getInstance",
    "isFocusRoot",
    "getQxObject",
    "__lastInput",
    "isModelSelection",
    "Array",
    "getModel",
    "ownerId",
    "model",
    "indexes",
    "toArray",
    "map",
    "item",
    "indexOf",
    "isString",
    "VirtualTree",
    "row",
    "getLookupTable",
    "nodeId",
    "treevirtual",
    "TreeVirtual",
    "selection",
    "getDataModel",
    "getRowFromNodeId",
    "virtual",
    "Row",
    "table",
    "Model",
    "ranges",
    "getSelectedRanges",
    "minIndex",
    "maxIndex",
    "selected",
    "getQxObjectId",
    "selectedId",
    "getSelectables",
    "index",
    "startsWith",
    "getTrackPropertyChanges",
    "property",
    "String",
    "firstLow",
    "now",
    "msSinceLastEvent",
    "unshift",
    "Recorder"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n  UI Event Recorder\n\n  Copyright:\n    2018 Christian Boulanger\n\n  License:\n    MIT license\n    See the LICENSE file in the project's top-level directory for details.\n\n  Authors: Christian Boulanger\n\n************************************************************************ */\n\n/**\n * The base class of all recorder types\n * @require(qx.bom.Element)\n */\nqx.Class.define(\"cboulanger.eventrecorder.Recorder\", {\n  extend : qx.core.Object,\n  include : [\n    cboulanger.eventrecorder.MHelperMethods,\n    cboulanger.eventrecorder.MState\n  ],\n\n  /**\n   * Constructor\n   */\n  construct : function() {\n    this.base(arguments);\n\n    this.__excludeIds = [];\n    this.__lines = [];\n\n    this.addGlobalEventListener((target, event) => {\n      if (!this.isRunning()) {\n        return;\n      }\n      let id;\n      if (typeof target.getAttribute == \"function\") {\n        id = target.getAttribute(\"data-qx-object-id\");\n      } else if (target instanceof qx.core.Object) {\n        id = qx.core.Id.getAbsoluteIdOf(target, true);\n      } else {\n        return;\n      }\n      if (id) {\n        this.recordEvent(id, event, target);\n      }\n    });\n  },\n\n  properties: {\n\n    /**\n     * The recorder mode, can be \"overwrite\" or \"append\"\n     */\n    mode: {\n      check: [\"overwrite\", \"append\"],\n      nullable: false,\n      init: \"overwrite\"\n    },\n\n    /**\n     * Whether to output additional event data to the console\n     */\n    logEvents: {\n      check: \"Boolean\",\n      nullable: false,\n      init: false\n    }\n  },\n\n  /**\n   * The methods and simple properties of this class\n   */\n  members :\n  {\n    __lines: null,\n    __excludeIds: null,\n    __lastEventTimestamp: null,\n    __latInput: null,\n\n    /**\n     * Exclude the given id(s) from recording\n     * @param ids {Array|String}\n     */\n    excludeIds(ids) {\n      // normalize to array\n      ids = qx.lang.Type.isArray(ids)? ids: [ids];\n      // add ids that are not yet included by path\n      for (let id of ids) {\n        let found=false;\n        for (let excluded of this.__excludeIds) {\n          if (id.substr(0, excluded.length) === excluded) {\n            found = true;\n          }\n        }\n        if (!found) {\n          this.debug(`Excluding ${id} from event recording.`);\n          this.__excludeIds.push(id);\n        }\n      }\n    },\n\n    /**\n     * Returns the list of excluded ids.\n     * @return {String[]}\n     */\n    getExcludedIds() {\n      return this.__excludeIds;\n    },\n\n    /**\n     * Returns the recorded script\n     * @return {String}\n     */\n    getScript() {\n      return this.__lines.join(\"\\n\");\n    },\n\n    /**\n     * Sets the script to which the recorder should append new events\n     * @param script {String}\n     */\n    setScript(script) {\n      if (script) {\n        qx.core.Assert.assertString(script);\n        this.__lines = script.split(/\\n/);\n      } else {\n        this.__lines = [];\n      }\n    },\n\n    /**\n     * Called by start()\n     */\n    beforeStart() {\n      switch (this.getMode()) {\n        case \"overwrite\":\n          this.__lines = [\n            `config-set-mode presentation`,\n            `assert-match-uri ${document.location.host + document.location.pathname}`,\n            \"\"\n          ];\n          break;\n        case \"append\":\n          this.__lines = this.__lines.concat([\n            \"\",\n            `# appended at ${(new Date()).toLocaleString()}`,\n            \"\"\n          ]);\n          break;\n      }\n      this.__lastEventTimestamp = 0;\n    },\n\n    /**\n     * Called by the global event listener\n     * @param id {String}\n     * @param event {qx.event.type.Event}\n     * @param target {qx.bom.Element}\n     * @private\n     * @return {boolean} returns true if the event was recorded, false if\n     * it was ignored because of the list of excluded ids.\n     */\n    recordEvent(id, event, target) {\n      for (let excluded of this.__excludeIds) {\n        if (id.substr(0, excluded.length) === excluded) {\n          return false;\n        }\n      }\n      this.__lines = this.__lines.concat(this.createIntermediateCodeFromEvent(id, event, target));\n      return true;\n    },\n\n    /**\n     * Executed after stop()\n     */\n    afterStop() {\n      this.__lastEventTimestamp = 0;\n    },\n\n    /**\n     * Given an object id, the event name and the even target, return one or more\n     * pieces of intermediate code from which a player can replay the user action\n     * that lead to this event. Return an array, each element is one line of code\n     * @param {String} id The id of the qooxdoo object\n     * @param {qx.event.Event} event The event that was fired\n     * @param {qx.bom.Element|qx.core.Object} target The event target\n     * @return {String[]} An array of script lines\n     */\n    createIntermediateCodeFromEvent(id, event, target) {\n      // opt out of recording\n      if (typeof target.getTrackEvents == \"function\" && !target.getTrackEvents()) {\n        return [];\n      }\n      let lines = [];\n      const type = event.getType();\n      let data = typeof event.getData == \"function\" ? event.getData() : null;\n      let owner = typeof target.getQxOwner == \"function\" ? target.getQxOwner() : null;\n      if (this.getLogEvents()) {\n        this.debug(JSON.stringify({id, owner: owner && owner.toString(), type: type, data:data, target:target.toString()}));\n      }\n      switch (type) {\n        case \"dbltap\":\n          return [`dbltap ${id}`];\n        case \"tap\":\n          return [`tap ${id}`];\n        case \"execute\":\n          switch (true) {\n            case owner instanceof qx.ui.form.DateField:\n            case owner instanceof qx.ui.form.ComboBox:\n            case owner instanceof qx.ui.form.VirtualComboBox:\n            case target instanceof qx.ui.tree.core.FolderOpenButton:\n              return [];\n          }\n          lines.push(`execute ${id}`);\n          break;\n        case \"appear\":\n        case \"disappear\":\n          if (qx.ui.core.FocusHandler.getInstance().isFocusRoot(qx.core.Id.getQxObject(id))) {\n            return [`assert-${type}ed ${id}`];\n          }\n          return [];\n\n        case \"input\":\n          this.__lastInput = data;\n          return [];\n\n        case \"change\": {\n          // model selection\n          const isModelSelection =\n            target instanceof qx.data.Array &&\n            target.getQxOwner() &&\n            typeof target.getQxOwner().getModel == \"function\";\n          if (isModelSelection) {\n            const owner = target.getQxOwner();\n            const ownerId = qx.core.Id.getAbsoluteIdOf(owner);\n            const model = owner.getModel();\n            const indexes = target.toArray().map(item => model.indexOf(item));\n            lines.push(`set-model-selection ${ownerId} ${JSON.stringify(indexes)}`);\n            break;\n          }\n          // form fields\n          if (qx.lang.Type.isString(data) && data === this.__lastInput) {\n            lines.push(`set-value ${id} \"${data}\"`);\n          }\n          break;\n        }\n\n        case \"open\":\n        case \"close\": {\n          if (target instanceof qx.ui.tree.VirtualTree) {\n            let row = target.getLookupTable().indexOf(data);\n            if (row < 0) {\n              return [];\n            }\n            lines.push(`${type}-tree-node ${id} ${row}`);\n          }\n          break;\n        }\n        // qx.ui.treevirtual.TreeVirtual\n        case \"treeClose\":\n        case \"treeOpenWithContent\":\n        case \"treeOpenWhileEmpty\":\n          lines.push(`${type===\"treeClose\"?\"close-tree-node-treevirtual\":\"open-tree-node-treevirtual\"} ${id} ${data.nodeId}`);\n          break;\n\n        case \"changeSelection\": {\n          if (target instanceof qx.ui.treevirtual.TreeVirtual) {\n            let selection = event.getData();\n            if (!selection.length) {\n              return [];\n            }\n            let row = target.getDataModel().getRowFromNodeId(selection[0].nodeId);\n            lines.push(`set-table-selection ${id} ${row},${row}`);\n          }\n          if (target instanceof qx.ui.virtual.selection.Row) {\n            lines.push(`set-row-selection ${id} ${data}`);\n            break;\n          }\n          if (target instanceof qx.ui.table.selection.Model) {\n            lines.push(`reset-selection ${id}`);\n            let ranges = target.getSelectedRanges();\n            if (ranges.length) {\n              lines.push(`set-table-selection ${id} ${ranges[0].minIndex},${ranges[0].maxIndex}`);\n            }\n            break;\n          }\n          if (data && data.length && qx.lang.Type.isArray(data)) {\n            let selected = data[0];\n            if (selected instanceof qx.core.Object && selected.getQxObjectId()) {\n              let selectedId = qx.core.Id.getAbsoluteIdOf(selected);\n              lines.push(`set-selection ${id} ${selectedId}`);\n            } else if (typeof target.getSelectables == \"function\") {\n              let index = target.getSelectables().indexOf(selected);\n              lines.push(`set-selection-from-selectables ${id} ${index}`);\n            }\n            break;\n          }\n          return [];\n        }\n        default:\n          // record change events if explicitly requested\n          if (type.startsWith(\"change\") && typeof target.getTrackPropertyChanges == \"function\") {\n            if (target.getTrackPropertyChanges()) {\n              let property = qx.lang.String.firstLow(type.substr(6));\n              lines.push(`await-match-json ${id} ${property} ${JSON.stringify(data)}`);\n              break;\n            }\n          }\n          // ignore all others\n          return [];\n      }\n      // prepend a wait command to replay delays in user action\n      let now = Date.now();\n      let msSinceLastEvent = now - (this.__lastEventTimestamp || now);\n      this.__lastEventTimestamp = now;\n      if (msSinceLastEvent) {\n        lines.unshift(`delay ${msSinceLastEvent}`);\n      }\n      return lines;\n    }\n  }\n});\n"
  ]
}