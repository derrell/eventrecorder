{
  "version": 3,
  "sources": [
    "/home/travis/.nvm/versions/node/v10.15.3/lib/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/dev/unit/Sinon.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "statics",
    "getSinon",
    "dev",
    "unit",
    "Sinon",
    "sinon",
    "samsam",
    "formatio",
    "mod",
    "deps",
    "fn",
    "amd",
    "m",
    "module",
    "exports",
    "o",
    "Object",
    "prototype",
    "div",
    "document",
    "createElement",
    "isNaN",
    "value",
    "val",
    "getClass",
    "toString",
    "call",
    "split",
    "isArguments",
    "object",
    "length",
    "callee",
    "e",
    "isElement",
    "nodeType",
    "appendChild",
    "removeChild",
    "keys",
    "ks",
    "prop",
    "hasOwnProperty",
    "push",
    "isDate",
    "getTime",
    "valueOf",
    "isNegZero",
    "Infinity",
    "identical",
    "obj1",
    "obj2",
    "deepEqualCyclic",
    "objects1",
    "objects2",
    "paths1",
    "paths2",
    "compared",
    "isObject",
    "Boolean",
    "Date",
    "Number",
    "RegExp",
    "String",
    "getIndex",
    "objects",
    "obj",
    "i",
    "deepEqual",
    "path1",
    "path2",
    "type1",
    "type2",
    "isDate1",
    "isDate2",
    "class1",
    "class2",
    "keys1",
    "keys2",
    "key",
    "l",
    "value1",
    "value2",
    "isObject1",
    "isObject2",
    "index1",
    "index2",
    "newPath1",
    "newPath2",
    "JSON",
    "stringify",
    "match",
    "arrayContains",
    "array",
    "subset",
    "j",
    "k",
    "matcher",
    "test",
    "toLowerCase",
    "notNull",
    "indexOf",
    "Error",
    "require",
    "excludeConstructors",
    "quoteStrings",
    "specialObjects",
    "global",
    "window",
    "functionName",
    "func",
    "displayName",
    "name",
    "matches",
    "constructorName",
    "f",
    "constructor",
    "excludes",
    "isCircular",
    "ascii",
    "processed",
    "indent",
    "qs",
    "quote",
    "element",
    "pieces",
    "join",
    "properties",
    "sort",
    "str",
    "cons",
    "prefix",
    "is",
    "tagName",
    "attrs",
    "attributes",
    "attr",
    "pairs",
    "attrName",
    "item",
    "nodeName",
    "replace",
    "nodeValue",
    "formatted",
    "content",
    "innerHTML",
    "substr",
    "res",
    "Formatio",
    "options",
    "opt",
    "configure",
    "hasOwn",
    "isDOMNode",
    "success",
    "parentNode",
    "isFunction",
    "apply",
    "isReallyNaN",
    "mirrorProperties",
    "target",
    "source",
    "isRestorable",
    "restore",
    "wrapMethod",
    "property",
    "method",
    "TypeError",
    "wrappedMethod",
    "error",
    "calledBefore",
    "verb",
    "returns",
    "_stack",
    "stack",
    "owned",
    "extend",
    "arguments",
    "create",
    "proto",
    "F",
    "a",
    "b",
    "isMatcher",
    "ignoreCase",
    "multiline",
    "aString",
    "aLength",
    "bLength",
    "functionToString",
    "getCall",
    "callCount",
    "thisValue",
    "getConfig",
    "custom",
    "config",
    "defaults",
    "defaultConfig",
    "format",
    "injectIntoThis",
    "injectInto",
    "useFakeTimers",
    "useFakeServer",
    "timesInWords",
    "count",
    "calledInOrder",
    "spies",
    "called",
    "orderByFirstCall",
    "aCall",
    "bCall",
    "aId",
    "callId",
    "bId",
    "log",
    "logError",
    "label",
    "err",
    "msg",
    "message",
    "setTimeout",
    "typeOf",
    "undefined",
    "string",
    "substring",
    "createStubInstance",
    "stub",
    "isNode",
    "isAMD",
    "spy",
    "spyCall",
    "behavior",
    "mock",
    "collection",
    "assert",
    "sandbox",
    "testCase",
    "formatter",
    "util",
    "inspect",
    "commonJSModule",
    "assertType",
    "type",
    "actual",
    "isPrototypeOf",
    "matchObject",
    "expectation",
    "exp",
    "act",
    "or",
    "m2",
    "m1",
    "and",
    "any",
    "defined",
    "truthy",
    "falsy",
    "same",
    "instanceOf",
    "createPropertyMatcher",
    "propertyTest",
    "messagePrefix",
    "onlyProperty",
    "has",
    "bool",
    "number",
    "regexp",
    "date",
    "throwYieldError",
    "proxy",
    "text",
    "args",
    "slice",
    "Array",
    "callProto",
    "calledOn",
    "calledWith",
    "calledWithMatch",
    "calledWithExactly",
    "notCalledWith",
    "notCalledWithMatch",
    "returned",
    "returnValue",
    "threw",
    "exception",
    "calledWithNew",
    "other",
    "calledAfter",
    "callArg",
    "pos",
    "callArgOn",
    "callArgWith",
    "callArgOnWith",
    "concat",
    "yieldOn",
    "yieldTo",
    "yieldToOn",
    "callStr",
    "invokeCallback",
    "createSpyCall",
    "id",
    "proxyCall",
    "matchingFake",
    "fakes",
    "strict",
    "incrementCallCount",
    "notCalled",
    "calledOnce",
    "calledTwice",
    "calledThrice",
    "createCallProperties",
    "firstCall",
    "secondCall",
    "thirdCall",
    "lastCall",
    "vars",
    "createProxy",
    "p",
    "eval",
    "invoke",
    "uuid",
    "spyApi",
    "reset",
    "returnValues",
    "thisValues",
    "exceptions",
    "callIds",
    "_create",
    "matching",
    "thisCall",
    "getCalls",
    "calls",
    "spyFn",
    "withArgs",
    "original",
    "fake",
    "matchingAguments",
    "parent",
    "margs",
    "printf",
    "specifyer",
    "formatters",
    "parseInt",
    "delegateToCalls",
    "matchAny",
    "currentCall",
    "stringifiedCall",
    "nextTick",
    "process",
    "setImmediate",
    "callback",
    "throwsException",
    "getCallback",
    "callArgAt",
    "callArgProp",
    "getCallbackError",
    "callCallback",
    "callbackAsync",
    "callbackContext",
    "callbackArguments",
    "isPresent",
    "returnArgAt",
    "returnThis",
    "returnValueDefined",
    "context",
    "onCall",
    "index",
    "onFirstCall",
    "onSecondCall",
    "onThirdCall",
    "callsArg",
    "callsArgOn",
    "callsArgWith",
    "callsArgOnWith",
    "yields",
    "yieldsOn",
    "yieldsTo",
    "yieldsToOn",
    "returnsArg",
    "returnsThis",
    "syncFnName",
    "result",
    "wrapper",
    "getDefaultBehavior",
    "defaultBehavior",
    "getParentBehaviour",
    "getCurrentBehavior",
    "behaviors",
    "functionStub",
    "orig",
    "resetBehavior",
    "behaviorMethod",
    "each",
    "mockObject",
    "expects",
    "expectations",
    "proxies",
    "invokeMethod",
    "verify",
    "messages",
    "met",
    "fail",
    "pass",
    "allowsCall",
    "available",
    "exhausted",
    "unshift",
    "times",
    "_invoke",
    "callCountInWords",
    "expectedCallCountInWords",
    "min",
    "minCalls",
    "max",
    "maxCalls",
    "receivedMinCalls",
    "hasMinLimit",
    "receivedMaxCalls",
    "verifyMatcher",
    "possibleMatcher",
    "arg",
    "methodName",
    "verifyCallAllowed",
    "atLeast",
    "num",
    "limitsSet",
    "atMost",
    "never",
    "exactly",
    "once",
    "twice",
    "thrice",
    "failed",
    "expectedThis",
    "expectedArguments",
    "expectsExactArgCount",
    "withExactArgs",
    "on",
    "getFakes",
    "fakeCollection",
    "compact",
    "splice",
    "resolve",
    "verifyAndRestore",
    "add",
    "stubbedObj",
    "inject",
    "col",
    "timeoutResult",
    "addTimerReturnsObject",
    "clearTimeout",
    "addTimer",
    "recurring",
    "toId",
    "delay",
    "timeouts",
    "callAt",
    "now",
    "invokeArgs",
    "interval",
    "ref",
    "unref",
    "parseTime",
    "strings",
    "ms",
    "parsed",
    "Math",
    "pow",
    "createObject",
    "newObject",
    "clock",
    "timeout",
    "timerId",
    "setInterval",
    "clearInterval",
    "passThruArgs",
    "clearImmediate",
    "tick",
    "tickFrom",
    "tickTo",
    "previous",
    "timer",
    "firstTimerInRange",
    "firstException",
    "callTimer",
    "from",
    "to",
    "smallest",
    "originalTimer",
    "NativeDate",
    "ClockDate",
    "year",
    "month",
    "hour",
    "minute",
    "second",
    "mirrorDateProperties",
    "toSource",
    "parse",
    "UTC",
    "toUTCString",
    "methods",
    "hadOwnProperty",
    "DeferredCallManager",
    "getInstance",
    "refreshTimeout",
    "stubGlobal",
    "timers",
    "Event",
    "bubbles",
    "cancelable",
    "initEvent",
    "stopPropagation",
    "preventDefault",
    "defaultPrevented",
    "ProgressEvent",
    "progressEventRaw",
    "loaded",
    "total",
    "CustomEvent",
    "customData",
    "detail",
    "EventTarget",
    "addEventListener",
    "event",
    "listener",
    "eventListeners",
    "removeEventListener",
    "listeners",
    "dispatchEvent",
    "handleEvent",
    "supportsProgress",
    "supportsCustomEvent",
    "xhr",
    "XMLHttpRequest",
    "GlobalXMLHttpRequest",
    "GlobalActiveXObject",
    "ActiveXObject",
    "supportsActiveX",
    "supportsXHR",
    "workingXHR",
    "supportsCORS",
    "unsafeHeaders",
    "FakeXMLHttpRequest",
    "readyState",
    "UNSENT",
    "requestHeaders",
    "requestBody",
    "status",
    "statusText",
    "upload",
    "UploadProgress",
    "withCredentials",
    "events",
    "eventName",
    "onCreate",
    "verifyState",
    "OPENED",
    "sendFlag",
    "some",
    "filters",
    "addFilter",
    "IE6Re",
    "defake",
    "fakeXhr",
    "xhrArgs",
    "copyAttrs",
    "navigator",
    "userAgent",
    "stateChange",
    "HEADERS_RECEIVED",
    "LOADING",
    "DONE",
    "onreadystatechange",
    "handler",
    "useFilters",
    "verifyRequestOpened",
    "verifyRequestSent",
    "verifyHeadersReceived",
    "async",
    "verifyResponseBodyType",
    "body",
    "open",
    "url",
    "username",
    "password",
    "responseText",
    "responseXML",
    "filter",
    "readyStateChange",
    "state",
    "setRequestHeader",
    "header",
    "setResponseHeaders",
    "headers",
    "responseHeaders",
    "send",
    "data",
    "errorFlag",
    "onSend",
    "abort",
    "aborted",
    "onerror",
    "getResponseHeader",
    "h",
    "getAllResponseHeaders",
    "setResponseBody",
    "chunkSize",
    "parseXML",
    "respond",
    "statusCodes",
    "uploadProgress",
    "uploadError",
    "xmlDoc",
    "DOMParser",
    "parser",
    "parseFromString",
    "loadXML",
    "useFakeXMLHttpRequest",
    "keepOnCreate",
    "objId",
    "fakeServer",
    "responseArray",
    "response",
    "wloc",
    "location",
    "rCurrLoc",
    "protocol",
    "host",
    "matchOne",
    "reqMethod",
    "reqUrl",
    "rmeth",
    "matchMethod",
    "matchUrl",
    "request",
    "requestUrl",
    "getHTTPMethod",
    "ru",
    "exec",
    "server",
    "requests",
    "xhrObj",
    "addRequest",
    "handleRequest",
    "autoRespond",
    "responding",
    "autoRespondAfter",
    "fakeHTTPMethods",
    "queue",
    "processRequest",
    "respondWith",
    "responses",
    "shift",
    "Server",
    "fakeServerWithClock",
    "resetClock",
    "longestTimeout",
    "clockSetTimeout",
    "clockSetInterval",
    "returnVal",
    "exposeValue",
    "injectedKeys",
    "prepareSandboxFromConfig",
    "serverPrototype",
    "restoreContext",
    "exposed",
    "createTest",
    "setUp",
    "tearDown",
    "tests",
    "rPrefix",
    "testName",
    "verifyIsStub",
    "failAssertion",
    "failMethod",
    "mirrorPropAsAssertion",
    "exposedName",
    "toUpperCase",
    "failException",
    "assertion",
    "callOrder",
    "assertCallOrder",
    "expected",
    "assertCallCount",
    "expose",
    "includeFail",
    "self",
    "origSinon"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2013 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tristan Koch (tristankoch)\n\n   ======================================================================\n\n   This class contains code based on the following work:\n\n   * Sinon.JS 1.9.1\n\n     Homepage:\n       http://sinonjs.org/\n\n     Documentation:\n       http://sinonjs.org/docs/\n\n     Discussion:\n       http://groups.google.com/group/sinonjs\n\n     Code:\n       https://github.com/cjohansen/Sinon.JS\n\n     Copyright:\n       (c) 2010-2014, Christian Johansen\n\n     License:\n       BSD: http://www.opensource.org/licenses/bsd-license.php\n\n************************************************************************ */\n\n/**\n * Exposes Sinon.JS to qooxdoo.\n *\n * This class exposes Sinon.JS (http://sinonjs.org/) and is not to be used\n * directly. Instead, you should include qx.dev.unit.MMock in your TestCase\n * and use the wrappers provided.\n *\n * @internal\n * @ignore(module, require, global, ProgressEvent, clearImmediate)\n * @lint ignoreDeprecated(eval)\n * @ignore(module.exports.*)\n *\n */\nqx.Bootstrap.define(\"qx.dev.unit.Sinon\",\n{\n  statics :\n  {\n    /**\n     * Get the Sinon.JS object.\n     *\n     * @signature function()\n     * @return {Object} The Sinon.JS object\n     *\n     */\n    getSinon: null\n  }\n});\n\n\n/**\n * @ignore(module, require, global, process.*, setImmediate)\n * @ignore(msSetImmediate.*)\n * @lint ignoreUnused(alen, requestMethod, index)\n * @lint ignoreNoLoopBlock()\n *\n * @lint ignoreJsdocKey(author, license, depend)\n */\n(function() {\n\n/**\n * Below is the original Sinon.JS code with some minor changes:\n *\n * - aliased \"throws\" as \"throwsException\"\n * - replaced references to this.sinon which do not make sense within a closure\n * - in failAssertion, \"assert.fail\" takes precedence over \"object.fail\"\n *\n */\n/**\n * Sinon.JS 1.9.1, 2014/04/03\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @author Contributors: https://github.com/cjohansen/Sinon.JS/blob/master/AUTHORS\n *\n * (The BSD License)\n *\n * Copyright (c) 2010-2014, Christian Johansen, christian@cjohansen.no\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n *     * Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright notice,\n *       this list of conditions and the following disclaimer in the documentation\n *       and/or other materials provided with the distribution.\n *     * Neither the name of Christian Johansen nor the names of his contributors\n *       may be used to endorse or promote products derived from this software\n *       without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nthis.sinon = (function () {\nvar samsam, formatio;\nfunction define(mod, deps, fn) { if (mod == \"samsam\") { samsam = deps(); } else { formatio = fn(samsam); } }\ndefine.amd = true;\n((typeof define === \"function\" && define.amd && function (m) { define(\"samsam\", m); }) ||\n (typeof module === \"object\" &&\n      function (m) { module.exports = m(); }) || // Node\n function (m) { this.samsam = m(); } // Browser globals\n)(function () {\n    var o = Object.prototype;\n    var div = typeof document !== \"undefined\" && document.createElement(\"div\");\n\n    function isNaN(value) {\n        // Unlike global isNaN, this avoids type coercion\n        // typeof check avoids IE host object issues, hat tip to\n        // lodash\n        var val = value; // JsLint thinks value !== value is \"weird\"\n        return typeof value === \"number\" && value !== val;\n    }\n\n    function getClass(value) {\n        // Returns the internal [[Class]] by calling Object.prototype.toString\n        // with the provided value as this. Return value is a string, naming the\n        // internal class, e.g. \"Array\"\n        return o.toString.call(value).split(/[ \\]]/)[1];\n    }\n\n    /**\n     * @param object {Object}\n     *\n     * Returns ``true`` if ``object`` is an ``arguments`` object,\n     * ``false`` otherwise.\n     */\n    function isArguments(object) {\n        if (typeof object !== \"object\" || typeof object.length !== \"number\" ||\n                getClass(object) === \"Array\") {\n            return false;\n        }\n        if (typeof object.callee == \"function\") { return true; }\n        try {\n            object[object.length] = 6;\n            delete object[object.length];\n        } catch (e) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * @param object {Object}\n     *\n     * Returns ``true`` if ``object`` is a DOM element node. Unlike\n     * Underscore.js/lodash, this function will return ``false`` if ``object``\n     * is an *element-like* object, i.e. a regular object with a ``nodeType``\n     * property that holds the value ``1``.\n     */\n    function isElement(object) {\n        if (!object || object.nodeType !== 1 || !div) { return false; }\n        try {\n            object.appendChild(div);\n            object.removeChild(div);\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * @param object {Object}\n     *\n     * Return an array of own property names.\n     */\n    function keys(object) {\n        var ks = [], prop;\n        for (prop in object) {\n            if (o.hasOwnProperty.call(object, prop)) { ks.push(prop); }\n        }\n        return ks;\n    }\n\n    /**\n     * @param value {Object}\n     *\n     * Returns true if the object is a ``Date``, or *date-like*. Duck typing\n     * of date objects work by checking that the object has a ``getTime``\n     * function whose return value equals the return value from the object's\n     * ``valueOf``.\n     */\n    function isDate(value) {\n        return typeof value.getTime == \"function\" &&\n            value.getTime() == value.valueOf();\n    }\n\n    /**\n     * @param value {Object}\n     *\n     * Returns ``true`` if ``value`` is ``-0``.\n     */\n    function isNegZero(value) {\n        return value === 0 && 1 / value === -Infinity;\n    }\n\n    /**\n     * @param obj1 {Object}\n     * @param obj2 {Object}\n     *\n     * Returns ``true`` if two objects are strictly equal. Compared to\n     * ``===`` there are two exceptions:\n     *\n     *   - NaN is considered equal to NaN\n     *   - -0 and +0 are not considered equal\n     */\n    function identical(obj1, obj2) {\n        if (obj1 === obj2 || (isNaN(obj1) && isNaN(obj2))) {\n            return obj1 !== 0 || isNegZero(obj1) === isNegZero(obj2);\n        }\n    }\n\n\n    /**\n     * @param obj1 {Object}\n     * @param obj2 {Object}\n     *\n     * Deep equal comparison. Two values are \"deep equal\" if:\n     *\n     *   - They are equal, according to samsam.identical\n     *   - They are both date objects representing the same time\n     *   - They are both arrays containing elements that are all deepEqual\n     *   - They are objects with the same set of properties, and each property\n     *     in ``obj1`` is deepEqual to the corresponding property in ``obj2``\n     *\n     * Supports cyclic objects.\n     */\n    function deepEqualCyclic(obj1, obj2) {\n\n        // used for cyclic comparison\n        // contain already visited objects\n        var objects1 = [],\n            objects2 = [],\n        // contain pathes (position in the object structure)\n        // of the already visited objects\n        // indexes same as in objects arrays\n            paths1 = [],\n            paths2 = [],\n        // contains combinations of already compared objects\n        // in the manner: { \"$1['ref']$2['ref']\": true }\n            compared = {};\n\n        /**\n         * used to check, if the value of a property is an object\n         * (cyclic logic is only needed for objects)\n         * only needed for cyclic logic\n         */\n        function isObject(value) {\n\n            if (typeof value === 'object' && value !== null &&\n                    !(value instanceof Boolean) &&\n                    !(value instanceof Date)    &&\n                    !(value instanceof Number)  &&\n                    !(value instanceof RegExp)  &&\n                    !(value instanceof String)) {\n\n                return true;\n            }\n\n            return false;\n        }\n\n        /**\n         * returns the index of the given object in the\n         * given objects array, -1 if not contained\n         * only needed for cyclic logic\n         */\n        function getIndex(objects, obj) {\n\n            var i;\n            for (i = 0; i < objects.length; i++) {\n                if (objects[i] === obj) {\n                    return i;\n                }\n            }\n\n            return -1;\n        }\n\n        // does the recursion for the deep equal check\n        return (function deepEqual(obj1, obj2, path1, path2) {\n            var type1 = typeof obj1;\n            var type2 = typeof obj2;\n\n            // == null also matches undefined\n            if (obj1 === obj2 ||\n                    isNaN(obj1) || isNaN(obj2) ||\n                    obj1 == null || obj2 == null ||\n                    type1 !== \"object\" || type2 !== \"object\") {\n\n                return identical(obj1, obj2);\n            }\n\n            // Elements are only equal if identical(expected, actual)\n            if (isElement(obj1) || isElement(obj2)) { return false; }\n\n            var isDate1 = isDate(obj1), isDate2 = isDate(obj2);\n            if (isDate1 || isDate2) {\n                if (!isDate1 || !isDate2 || obj1.getTime() !== obj2.getTime()) {\n                    return false;\n                }\n            }\n\n            if (obj1 instanceof RegExp && obj2 instanceof RegExp) {\n                if (obj1.toString() !== obj2.toString()) { return false; }\n            }\n\n            var class1 = getClass(obj1);\n            var class2 = getClass(obj2);\n            var keys1 = keys(obj1);\n            var keys2 = keys(obj2);\n\n            if (isArguments(obj1) || isArguments(obj2)) {\n                if (obj1.length !== obj2.length) { return false; }\n            } else {\n                if (type1 !== type2 || class1 !== class2 ||\n                        keys1.length !== keys2.length) {\n                    return false;\n                }\n            }\n\n            var key, i, l,\n                // following vars are used for the cyclic logic\n                value1, value2,\n                isObject1, isObject2,\n                index1, index2,\n                newPath1, newPath2;\n\n            for (i = 0, l = keys1.length; i < l; i++) {\n                key = keys1[i];\n                if (!o.hasOwnProperty.call(obj2, key)) {\n                    return false;\n                }\n\n                // Start of the cyclic logic\n\n                value1 = obj1[key];\n                value2 = obj2[key];\n\n                isObject1 = isObject(value1);\n                isObject2 = isObject(value2);\n\n                // determine, if the objects were already visited\n                // (it's faster to check for isObject first, than to\n                // get -1 from getIndex for non objects)\n                index1 = isObject1 ? getIndex(objects1, value1) : -1;\n                index2 = isObject2 ? getIndex(objects2, value2) : -1;\n\n                // determine the new pathes of the objects\n                // - for non cyclic objects the current path will be extended\n                //   by current property name\n                // - for cyclic objects the stored path is taken\n                newPath1 = index1 !== -1\n                    ? paths1[index1]\n                    : path1 + '[' + JSON.stringify(key) + ']';\n                newPath2 = index2 !== -1\n                    ? paths2[index2]\n                    : path2 + '[' + JSON.stringify(key) + ']';\n\n                // stop recursion if current objects are already compared\n                if (compared[newPath1 + newPath2]) {\n                    return true;\n                }\n\n                // remember the current objects and their pathes\n                if (index1 === -1 && isObject1) {\n                    objects1.push(value1);\n                    paths1.push(newPath1);\n                }\n                if (index2 === -1 && isObject2) {\n                    objects2.push(value2);\n                    paths2.push(newPath2);\n                }\n\n                // remember that the current objects are already compared\n                if (isObject1 && isObject2) {\n                    compared[newPath1 + newPath2] = true;\n                }\n\n                // End of cyclic logic\n\n                // neither value1 nor value2 is a cycle\n                // continue with next level\n                if (!deepEqual(value1, value2, newPath1, newPath2)) {\n                    return false;\n                }\n            }\n\n            return true;\n\n        }(obj1, obj2, '$1', '$2'));\n    }\n\n    var match;\n\n    function arrayContains(array, subset) {\n        if (subset.length === 0) { return true; }\n        var i, l, j, k;\n        for (i = 0, l = array.length; i < l; ++i) {\n            if (match(array[i], subset[0])) {\n                for (j = 0, k = subset.length; j < k; ++j) {\n                    if (!match(array[i + j], subset[j])) { return false; }\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * @param object {Object}\n     * @param matcher {object}\n     *\n     * Compare arbitrary value ``object`` with matcher.\n     */\n    match = function match(object, matcher) {\n        if (matcher && typeof matcher.test === \"function\") {\n            return matcher.test(object);\n        }\n\n        if (typeof matcher === \"function\") {\n            return matcher(object) === true;\n        }\n\n        if (typeof matcher === \"string\") {\n            matcher = matcher.toLowerCase();\n            var notNull = typeof object === \"string\" || !!object;\n            return notNull &&\n                (String(object)).toLowerCase().indexOf(matcher) >= 0;\n        }\n\n        if (typeof matcher === \"number\") {\n            return matcher === object;\n        }\n\n        if (typeof matcher === \"boolean\") {\n            return matcher === object;\n        }\n\n        if (getClass(object) === \"Array\" && getClass(matcher) === \"Array\") {\n            return arrayContains(object, matcher);\n        }\n\n        if (matcher && typeof matcher === \"object\") {\n            var prop;\n            for (prop in matcher) {\n                if (!match(object[prop], matcher[prop])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        throw new Error(\"Matcher was not a string, a number, a \" +\n                        \"function, a boolean or an object\");\n    };\n\n    return {\n        isArguments: isArguments,\n        isElement: isElement,\n        isDate: isDate,\n        isNegZero: isNegZero,\n        identical: identical,\n        deepEqual: deepEqualCyclic,\n        match: match,\n        keys: keys\n    };\n});\n((typeof define === \"function\" && define.amd && function (m) {\n    define(\"formatio\", [\"samsam\"], m);\n}) || (typeof module === \"object\" && function (m) {\n    module.exports = m(require(\"samsam\"));\n}) || function (m) { this.formatio = m(this.samsam); }\n)(function (samsam) {\n\n    var formatio = {\n        excludeConstructors: [\"Object\", /^.$/],\n        quoteStrings: true\n    };\n\n    var specialObjects = [];\n    if (typeof global !== \"undefined\") {\n        specialObjects.push({ object: global, value: \"[object global]\" });\n    }\n    if (typeof document !== \"undefined\") {\n        specialObjects.push({\n            object: document,\n            value: \"[object HTMLDocument]\"\n        });\n    }\n    if (typeof window !== \"undefined\") {\n        specialObjects.push({ object: window, value: \"[object Window]\" });\n    }\n\n    function functionName(func) {\n        if (!func) { return \"\"; }\n        if (func.displayName) { return func.displayName; }\n        if (func.name) { return func.name; }\n        var matches = func.toString().match(/function\\s+([^\\(]+)/m);\n        return (matches && matches[1]) || \"\";\n    }\n\n    function constructorName(f, object) {\n        var name = functionName(object && object.constructor);\n        var excludes = f.excludeConstructors ||\n                formatio.excludeConstructors || [];\n\n        var i, l;\n        for (i = 0, l = excludes.length; i < l; ++i) {\n            if (typeof excludes[i] === \"string\" && excludes[i] === name) {\n                return \"\";\n            } else if (excludes[i].test && excludes[i].test(name)) {\n                return \"\";\n            }\n        }\n\n        return name;\n    }\n\n    function isCircular(object, objects) {\n        if (typeof object !== \"object\") { return false; }\n        var i, l;\n        for (i = 0, l = objects.length; i < l; ++i) {\n            if (objects[i] === object) { return true; }\n        }\n        return false;\n    }\n\n    function ascii(f, object, processed, indent) {\n        if (typeof object === \"string\") {\n            var qs = f.quoteStrings;\n            var quote = typeof qs !== \"boolean\" || qs;\n            return processed || quote ? '\"' + object + '\"' : object;\n        }\n\n        if (typeof object === \"function\" && !(object instanceof RegExp)) {\n            return ascii.func(object);\n        }\n\n        processed = processed || [];\n\n        if (isCircular(object, processed)) { return \"[Circular]\"; }\n\n        if (Object.prototype.toString.call(object) === \"[object Array]\") {\n            return ascii.array.call(f, object, processed);\n        }\n\n        if (!object) { return String((1/object) === -Infinity ? \"-0\" : object); }\n        if (samsam.isElement(object)) { return ascii.element(object); }\n\n        if (typeof object.toString === \"function\" &&\n                object.toString !== Object.prototype.toString) {\n            return object.toString();\n        }\n\n        var i, l;\n        for (i = 0, l = specialObjects.length; i < l; i++) {\n            if (object === specialObjects[i].object) {\n                return specialObjects[i].value;\n            }\n        }\n\n        return ascii.object.call(f, object, processed, indent);\n    }\n\n    ascii.func = function (func) {\n        return \"function \" + functionName(func) + \"() {}\";\n    };\n\n    ascii.array = function (array, processed) {\n        processed = processed || [];\n        processed.push(array);\n        var i, l, pieces = [];\n        for (i = 0, l = array.length; i < l; ++i) {\n            pieces.push(ascii(this, array[i], processed));\n        }\n        return \"[\" + pieces.join(\", \") + \"]\";\n    };\n\n    ascii.object = function (object, processed, indent) {\n        processed = processed || [];\n        processed.push(object);\n        indent = indent || 0;\n        var pieces = [], properties = samsam.keys(object).sort();\n        var length = 3;\n        var prop, str, obj, i, l;\n\n        for (i = 0, l = properties.length; i < l; ++i) {\n            prop = properties[i];\n            obj = object[prop];\n\n            if (isCircular(obj, processed)) {\n                str = \"[Circular]\";\n            } else {\n                str = ascii(this, obj, processed, indent + 2);\n            }\n\n            str = (/\\s/.test(prop) ? '\"' + prop + '\"' : prop) + \": \" + str;\n            length += str.length;\n            pieces.push(str);\n        }\n\n        var cons = constructorName(this, object);\n        var prefix = cons ? \"[\" + cons + \"] \" : \"\";\n        var is = \"\";\n        for (i = 0, l = indent; i < l; ++i) { is += \" \"; }\n\n        if (length + indent > 80) {\n            return prefix + \"{\\n  \" + is + pieces.join(\",\\n  \" + is) + \"\\n\" +\n                is + \"}\";\n        }\n        return prefix + \"{ \" + pieces.join(\", \") + \" }\";\n    };\n\n    ascii.element = function (element) {\n        var tagName = element.tagName.toLowerCase();\n        var attrs = element.attributes, attr, pairs = [], attrName, i, l, val;\n\n        for (i = 0, l = attrs.length; i < l; ++i) {\n            attr = attrs.item(i);\n            attrName = attr.nodeName.toLowerCase().replace(\"html:\", \"\");\n            val = attr.nodeValue;\n            if (attrName !== \"contenteditable\" || val !== \"inherit\") {\n                if (!!val) { pairs.push(attrName + \"=\\\"\" + val + \"\\\"\"); }\n            }\n        }\n\n        var formatted = \"<\" + tagName + (pairs.length > 0 ? \" \" : \"\");\n        var content = element.innerHTML;\n\n        if (content.length > 20) {\n            content = content.substr(0, 20) + \"[...]\";\n        }\n\n        var res = formatted + pairs.join(\" \") + \">\" + content +\n                \"</\" + tagName + \">\";\n\n        return res.replace(/ contentEditable=\"inherit\"/, \"\");\n    };\n\n    function Formatio(options) {\n        for (var opt in options) {\n            this[opt] = options[opt];\n        }\n    }\n\n    Formatio.prototype = {\n        functionName: functionName,\n\n        configure: function (options) {\n            return new Formatio(options);\n        },\n\n        constructorName: function (object) {\n            return constructorName(this, object);\n        },\n\n        ascii: function (object, processed, indent) {\n            return ascii(this, object, processed, indent);\n        }\n    };\n\n    return Formatio.prototype;\n});\n/*jslint eqeqeq: false, onevar: false, forin: true, nomen: false, regexp: false, plusplus: false*/\n/*global module, require, __dirname, document*/\n/**\n * Sinon core utilities. For internal use only.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nvar sinon = (function (formatio) {\n    var div = typeof document != \"undefined\" && document.createElement(\"div\");\n    var hasOwn = Object.prototype.hasOwnProperty;\n\n    function isDOMNode(obj) {\n        var success = false;\n\n        try {\n            obj.appendChild(div);\n            success = div.parentNode == obj;\n        } catch (e) {\n            return false;\n        } finally {\n            try {\n                obj.removeChild(div);\n            } catch (e) {\n                // Remove failed, not much we can do about that\n            }\n        }\n\n        return success;\n    }\n\n    function isElement(obj) {\n        return div && obj && obj.nodeType === 1 && isDOMNode(obj);\n    }\n\n    function isFunction(obj) {\n        return typeof obj === \"function\" || !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n\n    function isReallyNaN(val) {\n        return typeof val === 'number' && isNaN(val);\n    }\n\n    function mirrorProperties(target, source) {\n        for (var prop in source) {\n            if (!hasOwn.call(target, prop)) {\n                target[prop] = source[prop];\n            }\n        }\n    }\n\n    function isRestorable (obj) {\n        return typeof obj === \"function\" && typeof obj.restore === \"function\" && obj.restore.sinon;\n    }\n\n    var sinon = {\n        wrapMethod: function wrapMethod(object, property, method) {\n            if (!object) {\n                throw new TypeError(\"Should wrap property of object\");\n            }\n\n            if (typeof method != \"function\") {\n                throw new TypeError(\"Method wrapper should be function\");\n            }\n\n            var wrappedMethod = object[property],\n                error;\n\n            if (!isFunction(wrappedMethod)) {\n                error = new TypeError(\"Attempted to wrap \" + (typeof wrappedMethod) + \" property \" +\n                                    property + \" as function\");\n            }\n\n            if (wrappedMethod.restore && wrappedMethod.restore.sinon) {\n                error = new TypeError(\"Attempted to wrap \" + property + \" which is already wrapped\");\n            }\n\n            if (wrappedMethod.calledBefore) {\n                var verb = !!wrappedMethod.returns ? \"stubbed\" : \"spied on\";\n                error = new TypeError(\"Attempted to wrap \" + property + \" which is already \" + verb);\n            }\n\n            if (error) {\n                if (wrappedMethod._stack) {\n                    error.stack += '\\n--------------\\n' + wrappedMethod._stack;\n                }\n                throw error;\n            }\n\n            // IE 8 does not support hasOwnProperty on the window object and Firefox has a problem\n            // when using hasOwn.call on objects from other frames.\n            var owned = object.hasOwnProperty ? object.hasOwnProperty(property) : hasOwn.call(object, property);\n            object[property] = method;\n            method.displayName = property;\n            // Set up a stack trace which can be used later to find what line of\n            // code the original method was created on.\n            method._stack = (new Error('Stack Trace for original')).stack;\n\n            method.restore = function () {\n                // For prototype properties try to reset by delete first.\n                // If this fails (ex: localStorage on mobile safari) then force a reset\n                // via direct assignment.\n                if (!owned) {\n                    delete object[property];\n                }\n                if (object[property] === method) {\n                    object[property] = wrappedMethod;\n                }\n            };\n\n            method.restore.sinon = true;\n            mirrorProperties(method, wrappedMethod);\n\n            return method;\n        },\n\n        extend: function extend(target) {\n            for (var i = 1, l = arguments.length; i < l; i += 1) {\n                for (var prop in arguments[i]) {\n                    if (arguments[i].hasOwnProperty(prop)) {\n                        target[prop] = arguments[i][prop];\n                    }\n\n                    // DONT ENUM bug, only care about toString\n                    if (arguments[i].hasOwnProperty(\"toString\") &&\n                        arguments[i].toString != target.toString) {\n                        target.toString = arguments[i].toString;\n                    }\n                }\n            }\n\n            return target;\n        },\n\n        create: function create(proto) {\n            var F = function () {};\n            F.prototype = proto;\n            return new F();\n        },\n\n        deepEqual: function deepEqual(a, b) {\n            if (sinon.match && sinon.match.isMatcher(a)) {\n                return a.test(b);\n            }\n\n            if (typeof a != 'object' || typeof b != 'object') {\n                if (isReallyNaN(a) && isReallyNaN(b)) {\n                    return true;\n                } else {\n                    return a === b;\n                }\n            }\n\n            if (isElement(a) || isElement(b)) {\n                return a === b;\n            }\n\n            if (a === b) {\n                return true;\n            }\n\n            if ((a === null && b !== null) || (a !== null && b === null)) {\n                return false;\n            }\n\n            if (a instanceof RegExp && b instanceof RegExp) {\n              return (a.source === b.source) && (a.global === b.global) &&\n                (a.ignoreCase === b.ignoreCase) && (a.multiline === b.multiline);\n            }\n\n            var aString = Object.prototype.toString.call(a);\n            if (aString != Object.prototype.toString.call(b)) {\n                return false;\n            }\n\n            if (aString == \"[object Date]\") {\n                return a.valueOf() === b.valueOf();\n            }\n\n            var prop, aLength = 0, bLength = 0;\n\n            if (aString == \"[object Array]\" && a.length !== b.length) {\n                return false;\n            }\n\n            for (prop in a) {\n                aLength += 1;\n\n                if (!deepEqual(a[prop], b[prop])) {\n                    return false;\n                }\n            }\n\n            for (prop in b) {\n                bLength += 1;\n            }\n\n            return aLength == bLength;\n        },\n\n        functionName: function functionName(func) {\n            var name = func.displayName || func.name;\n\n            // Use function decomposition as a last resort to get function\n            // name. Does not rely on function decomposition to work - if it\n            // doesn't debugging will be slightly less informative\n            // (i.e. toString will say 'spy' rather than 'myFunc').\n            if (!name) {\n                var matches = func.toString().match(/function ([^\\s\\(]+)/);\n                name = matches && matches[1];\n            }\n\n            return name;\n        },\n\n        functionToString: function toString() {\n            if (this.getCall && this.callCount) {\n                var thisValue, prop, i = this.callCount;\n\n                while (i--) {\n                    thisValue = this.getCall(i).thisValue;\n\n                    for (prop in thisValue) {\n                        if (thisValue[prop] === this) {\n                            return prop;\n                        }\n                    }\n                }\n            }\n\n            return this.displayName || \"sinon fake\";\n        },\n\n        getConfig: function (custom) {\n            var config = {};\n            custom = custom || {};\n            var defaults = sinon.defaultConfig;\n\n            for (var prop in defaults) {\n                if (defaults.hasOwnProperty(prop)) {\n                    config[prop] = custom.hasOwnProperty(prop) ? custom[prop] : defaults[prop];\n                }\n            }\n\n            return config;\n        },\n\n        format: function (val) {\n            return \"\" + val;\n        },\n\n        defaultConfig: {\n            injectIntoThis: true,\n            injectInto: null,\n            properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"server\", \"requests\"],\n            useFakeTimers: true,\n            useFakeServer: true\n        },\n\n        timesInWords: function timesInWords(count) {\n            return count == 1 && \"once\" ||\n                count == 2 && \"twice\" ||\n                count == 3 && \"thrice\" ||\n                (count || 0) + \" times\";\n        },\n\n        calledInOrder: function (spies) {\n            for (var i = 1, l = spies.length; i < l; i++) {\n                if (!spies[i - 1].calledBefore(spies[i]) || !spies[i].called) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        orderByFirstCall: function (spies) {\n            return spies.sort(function (a, b) {\n                // uuid, won't ever be equal\n                var aCall = a.getCall(0);\n                var bCall = b.getCall(0);\n                var aId = aCall && aCall.callId || -1;\n                var bId = bCall && bCall.callId || -1;\n\n                return aId < bId ? -1 : 1;\n            });\n        },\n\n        log: function () {},\n\n        logError: function (label, err) {\n            var msg = label + \" threw exception: \";\n            sinon.log(msg + \"[\" + err.name + \"] \" + err.message);\n            if (err.stack) { sinon.log(err.stack); }\n\n            setTimeout(function () {\n                err.message = msg + err.message;\n                throw err;\n            }, 0);\n        },\n\n        typeOf: function (value) {\n            if (value === null) {\n                return \"null\";\n            }\n            else if (value === undefined) {\n                return \"undefined\";\n            }\n            var string = Object.prototype.toString.call(value);\n            return string.substring(8, string.length - 1).toLowerCase();\n        },\n\n        createStubInstance: function (constructor) {\n            if (typeof constructor !== \"function\") {\n                throw new TypeError(\"The constructor should be a function.\");\n            }\n            return sinon.stub(sinon.create(constructor.prototype));\n        },\n\n        restore: function (object) {\n            if (object !== null && typeof object === \"object\") {\n                for (var prop in object) {\n                    if (isRestorable(object[prop])) {\n                        object[prop].restore();\n                    }\n                }\n            }\n            else if (isRestorable(object)) {\n                object.restore();\n            }\n        }\n    };\n\n    var isNode = typeof module !== \"undefined\" && module.exports;\n    var isAMD = typeof define === 'function' && typeof define.amd === 'object' && define.amd;\n\n    if (isAMD) {\n        define(function(){\n            return sinon;\n        });\n    } else if (isNode) {\n        try {\n            formatio = require(\"formatio\");\n        } catch (e) {}\n        module.exports = sinon;\n        module.exports.spy = require(\"./sinon/spy\");\n        module.exports.spyCall = require(\"./sinon/call\");\n        module.exports.behavior = require(\"./sinon/behavior\");\n        module.exports.stub = require(\"./sinon/stub\");\n        module.exports.mock = require(\"./sinon/mock\");\n        module.exports.collection = require(\"./sinon/collection\");\n        module.exports.assert = require(\"./sinon/assert\");\n        module.exports.sandbox = require(\"./sinon/sandbox\");\n        module.exports.test = require(\"./sinon/test\");\n        module.exports.testCase = require(\"./sinon/test_case\");\n        module.exports.assert = require(\"./sinon/assert\");\n        module.exports.match = require(\"./sinon/match\");\n    }\n\n    if (formatio) {\n        var formatter = formatio.configure({ quoteStrings: false });\n        sinon.format = function () {\n            return formatter.ascii.apply(formatter, arguments);\n        };\n    } else if (isNode) {\n        try {\n            var util = require(\"util\");\n            sinon.format = function (value) {\n                return typeof value == \"object\" && value.toString === Object.prototype.toString ? util.inspect(value) : value;\n            };\n        } catch (e) {\n            /* Node, but no util module - would be very old, but better safe than\n             sorry */\n        }\n    }\n\n    return sinon;\n}(typeof formatio == \"object\" && formatio));\n\n/* @depend ../sinon.js */\n/*jslint eqeqeq: false, onevar: false, plusplus: false*/\n/*global module, require, sinon*/\n/**\n * Match functions\n *\n * @author Maximilian Antoni (mail@maxantoni.de)\n * @license BSD\n *\n * Copyright (c) 2012 Maximilian Antoni\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function assertType(value, type, name) {\n        var actual = sinon.typeOf(value);\n        if (actual !== type) {\n            throw new TypeError(\"Expected type of \" + name + \" to be \" +\n                type + \", but was \" + actual);\n        }\n    }\n\n    var matcher = {\n        toString: function () {\n            return this.message;\n        }\n    };\n\n    function isMatcher(object) {\n        return matcher.isPrototypeOf(object);\n    }\n\n    function matchObject(expectation, actual) {\n        if (actual === null || actual === undefined) {\n            return false;\n        }\n        for (var key in expectation) {\n            if (expectation.hasOwnProperty(key)) {\n                var exp = expectation[key];\n                var act = actual[key];\n                if (match.isMatcher(exp)) {\n                    if (!exp.test(act)) {\n                        return false;\n                    }\n                } else if (sinon.typeOf(exp) === \"object\") {\n                    if (!matchObject(exp, act)) {\n                        return false;\n                    }\n                } else if (!sinon.deepEqual(exp, act)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    matcher.or = function (m2) {\n        if (!arguments.length) {\n            throw new TypeError(\"Matcher expected\");\n        } else if (!isMatcher(m2)) {\n            m2 = match(m2);\n        }\n        var m1 = this;\n        var or = sinon.create(matcher);\n        or.test = function (actual) {\n            return m1.test(actual) || m2.test(actual);\n        };\n        or.message = m1.message + \".or(\" + m2.message + \")\";\n        return or;\n    };\n\n    matcher.and = function (m2) {\n        if (!arguments.length) {\n            throw new TypeError(\"Matcher expected\");\n        } else if (!isMatcher(m2)) {\n            m2 = match(m2);\n        }\n        var m1 = this;\n        var and = sinon.create(matcher);\n        and.test = function (actual) {\n            return m1.test(actual) && m2.test(actual);\n        };\n        and.message = m1.message + \".and(\" + m2.message + \")\";\n        return and;\n    };\n\n    var match = function (expectation, message) {\n        var m = sinon.create(matcher);\n        var type = sinon.typeOf(expectation);\n        switch (type) {\n        case \"object\":\n            if (typeof expectation.test === \"function\") {\n                m.test = function (actual) {\n                    return expectation.test(actual) === true;\n                };\n                m.message = \"match(\" + sinon.functionName(expectation.test) + \")\";\n                return m;\n            }\n            var str = [];\n            for (var key in expectation) {\n                if (expectation.hasOwnProperty(key)) {\n                    str.push(key + \": \" + expectation[key]);\n                }\n            }\n            m.test = function (actual) {\n                return matchObject(expectation, actual);\n            };\n            m.message = \"match(\" + str.join(\", \") + \")\";\n            break;\n        case \"number\":\n            m.test = function (actual) {\n                return expectation == actual;\n            };\n            break;\n        case \"string\":\n            m.test = function (actual) {\n                if (typeof actual !== \"string\") {\n                    return false;\n                }\n                return actual.indexOf(expectation) !== -1;\n            };\n            m.message = \"match(\\\"\" + expectation + \"\\\")\";\n            break;\n        case \"regexp\":\n            m.test = function (actual) {\n                if (typeof actual !== \"string\") {\n                    return false;\n                }\n                return expectation.test(actual);\n            };\n            break;\n        case \"function\":\n            m.test = expectation;\n            if (message) {\n                m.message = message;\n            } else {\n                m.message = \"match(\" + sinon.functionName(expectation) + \")\";\n            }\n            break;\n        default:\n            m.test = function (actual) {\n              return sinon.deepEqual(expectation, actual);\n            };\n        }\n        if (!m.message) {\n            m.message = \"match(\" + expectation + \")\";\n        }\n        return m;\n    };\n\n    match.isMatcher = isMatcher;\n\n    match.any = match(function () {\n        return true;\n    }, \"any\");\n\n    match.defined = match(function (actual) {\n        return actual !== null && actual !== undefined;\n    }, \"defined\");\n\n    match.truthy = match(function (actual) {\n        return !!actual;\n    }, \"truthy\");\n\n    match.falsy = match(function (actual) {\n        return !actual;\n    }, \"falsy\");\n\n    match.same = function (expectation) {\n        return match(function (actual) {\n            return expectation === actual;\n        }, \"same(\" + expectation + \")\");\n    };\n\n    match.typeOf = function (type) {\n        assertType(type, \"string\", \"type\");\n        return match(function (actual) {\n            return sinon.typeOf(actual) === type;\n        }, \"typeOf(\\\"\" + type + \"\\\")\");\n    };\n\n    match.instanceOf = function (type) {\n        assertType(type, \"function\", \"type\");\n        return match(function (actual) {\n            return actual instanceof type;\n        }, \"instanceOf(\" + sinon.functionName(type) + \")\");\n    };\n\n    function createPropertyMatcher(propertyTest, messagePrefix) {\n        return function (property, value) {\n            assertType(property, \"string\", \"property\");\n            var onlyProperty = arguments.length === 1;\n            var message = messagePrefix + \"(\\\"\" + property + \"\\\"\";\n            if (!onlyProperty) {\n                message += \", \" + value;\n            }\n            message += \")\";\n            return match(function (actual) {\n                if (actual === undefined || actual === null ||\n                        !propertyTest(actual, property)) {\n                    return false;\n                }\n                return onlyProperty || sinon.deepEqual(value, actual[property]);\n            }, message);\n        };\n    }\n\n    match.has = createPropertyMatcher(function (actual, property) {\n        if (typeof actual === \"object\") {\n            return property in actual;\n        }\n        return actual[property] !== undefined;\n    }, \"has\");\n\n    match.hasOwn = createPropertyMatcher(function (actual, property) {\n        return actual.hasOwnProperty(property);\n    }, \"hasOwn\");\n\n    match.bool = match.typeOf(\"boolean\");\n    match.number = match.typeOf(\"number\");\n    match.string = match.typeOf(\"string\");\n    match.object = match.typeOf(\"object\");\n    match.func = match.typeOf(\"function\");\n    match.array = match.typeOf(\"array\");\n    match.regexp = match.typeOf(\"regexp\");\n    match.date = match.typeOf(\"date\");\n\n    if (commonJSModule) {\n        module.exports = match;\n    } else {\n        sinon.match = match;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n  * @depend ../sinon.js\n  * @depend match.js\n  */\n/*jslint eqeqeq: false, onevar: false, plusplus: false*/\n/*global module, require, sinon*/\n/**\n  * Spy calls\n  *\n  * @author Christian Johansen (christian@cjohansen.no)\n  * @author Maximilian Antoni (mail@maxantoni.de)\n  * @license BSD\n  *\n  * Copyright (c) 2010-2013 Christian Johansen\n  * Copyright (c) 2013 Maximilian Antoni\n  */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function throwYieldError(proxy, text, args) {\n        var msg = sinon.functionName(proxy) + text;\n        if (args.length) {\n            msg += \" Received [\" + slice.call(args).join(\", \") + \"]\";\n        }\n        throw new Error(msg);\n    }\n\n    var slice = Array.prototype.slice;\n\n    var callProto = {\n        calledOn: function calledOn(thisValue) {\n            if (sinon.match && sinon.match.isMatcher(thisValue)) {\n                return thisValue.test(this.thisValue);\n            }\n            return this.thisValue === thisValue;\n        },\n\n        calledWith: function calledWith() {\n            for (var i = 0, l = arguments.length; i < l; i += 1) {\n                if (!sinon.deepEqual(arguments[i], this.args[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        calledWithMatch: function calledWithMatch() {\n            for (var i = 0, l = arguments.length; i < l; i += 1) {\n                var actual = this.args[i];\n                var expectation = arguments[i];\n                if (!sinon.match || !sinon.match(expectation).test(actual)) {\n                    return false;\n                }\n            }\n            return true;\n        },\n\n        calledWithExactly: function calledWithExactly() {\n            return arguments.length == this.args.length &&\n                this.calledWith.apply(this, arguments);\n        },\n\n        notCalledWith: function notCalledWith() {\n            return !this.calledWith.apply(this, arguments);\n        },\n\n        notCalledWithMatch: function notCalledWithMatch() {\n            return !this.calledWithMatch.apply(this, arguments);\n        },\n\n        returned: function returned(value) {\n            return sinon.deepEqual(value, this.returnValue);\n        },\n\n        threw: function threw(error) {\n            if (typeof error === \"undefined\" || !this.exception) {\n                return !!this.exception;\n            }\n\n            return this.exception === error || this.exception.name === error;\n        },\n\n        calledWithNew: function calledWithNew() {\n            return this.proxy.prototype && this.thisValue instanceof this.proxy;\n        },\n\n        calledBefore: function (other) {\n            return this.callId < other.callId;\n        },\n\n        calledAfter: function (other) {\n            return this.callId > other.callId;\n        },\n\n        callArg: function (pos) {\n            this.args[pos]();\n        },\n\n        callArgOn: function (pos, thisValue) {\n            this.args[pos].apply(thisValue);\n        },\n\n        callArgWith: function (pos) {\n            this.callArgOnWith.apply(this, [pos, null].concat(slice.call(arguments, 1)));\n        },\n\n        callArgOnWith: function (pos, thisValue) {\n            var args = slice.call(arguments, 2);\n            this.args[pos].apply(thisValue, args);\n        },\n\n        \"yield\": function () {\n            this.yieldOn.apply(this, [null].concat(slice.call(arguments, 0)));\n        },\n\n        yieldOn: function (thisValue) {\n            var args = this.args;\n            for (var i = 0, l = args.length; i < l; ++i) {\n                if (typeof args[i] === \"function\") {\n                    args[i].apply(thisValue, slice.call(arguments, 1));\n                    return;\n                }\n            }\n            throwYieldError(this.proxy, \" cannot yield since no callback was passed.\", args);\n        },\n\n        yieldTo: function (prop) {\n            this.yieldToOn.apply(this, [prop, null].concat(slice.call(arguments, 1)));\n        },\n\n        yieldToOn: function (prop, thisValue) {\n            var args = this.args;\n            for (var i = 0, l = args.length; i < l; ++i) {\n                if (args[i] && typeof args[i][prop] === \"function\") {\n                    args[i][prop].apply(thisValue, slice.call(arguments, 2));\n                    return;\n                }\n            }\n            throwYieldError(this.proxy, \" cannot yield to '\" + prop +\n                \"' since no callback was passed.\", args);\n        },\n\n        toString: function () {\n            var callStr = this.proxy.toString() + \"(\";\n            var args = [];\n\n            for (var i = 0, l = this.args.length; i < l; ++i) {\n                args.push(sinon.format(this.args[i]));\n            }\n\n            callStr = callStr + args.join(\", \") + \")\";\n\n            if (typeof this.returnValue != \"undefined\") {\n                callStr += \" => \" + sinon.format(this.returnValue);\n            }\n\n            if (this.exception) {\n                callStr += \" !\" + this.exception.name;\n\n                if (this.exception.message) {\n                    callStr += \"(\" + this.exception.message + \")\";\n                }\n            }\n\n            return callStr;\n        }\n    };\n\n    callProto.invokeCallback = callProto.yield;\n\n    function createSpyCall(spy, thisValue, args, returnValue, exception, id) {\n        if (typeof id !== \"number\") {\n            throw new TypeError(\"Call id is not a number\");\n        }\n        var proxyCall = sinon.create(callProto);\n        proxyCall.proxy = spy;\n        proxyCall.thisValue = thisValue;\n        proxyCall.args = args;\n        proxyCall.returnValue = returnValue;\n        proxyCall.exception = exception;\n        proxyCall.callId = id;\n\n        return proxyCall;\n    }\n    createSpyCall.toString = callProto.toString; // used by mocks\n\n    if (commonJSModule) {\n        module.exports = createSpyCall;\n    } else {\n        sinon.spyCall = createSpyCall;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n\n/**\n  * @depend ../sinon.js\n  * @depend call.js\n  */\n/*jslint eqeqeq: false, onevar: false, plusplus: false*/\n/*global module, require, sinon*/\n/**\n  * Spy functions\n  *\n  * @author Christian Johansen (christian@cjohansen.no)\n  * @license BSD\n  *\n  * Copyright (c) 2010-2013 Christian Johansen\n  */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n    var push = Array.prototype.push;\n    var slice = Array.prototype.slice;\n    var callId = 0;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function spy(object, property) {\n        if (!property && typeof object == \"function\") {\n            return spy.create(object);\n        }\n\n        if (!object && !property) {\n            return spy.create(function () { });\n        }\n\n        var method = object[property];\n        return sinon.wrapMethod(object, property, spy.create(method));\n    }\n\n    function matchingFake(fakes, args, strict) {\n        if (!fakes) {\n            return;\n        }\n\n        for (var i = 0, l = fakes.length; i < l; i++) {\n            if (fakes[i].matches(args, strict)) {\n                return fakes[i];\n            }\n        }\n    }\n\n    function incrementCallCount() {\n        this.called = true;\n        this.callCount += 1;\n        this.notCalled = false;\n        this.calledOnce = this.callCount == 1;\n        this.calledTwice = this.callCount == 2;\n        this.calledThrice = this.callCount == 3;\n    }\n\n    function createCallProperties() {\n        this.firstCall = this.getCall(0);\n        this.secondCall = this.getCall(1);\n        this.thirdCall = this.getCall(2);\n        this.lastCall = this.getCall(this.callCount - 1);\n    }\n\n    var vars = \"a,b,c,d,e,f,g,h,i,j,k,l\";\n    function createProxy(func) {\n        // Retain the function length:\n        var p;\n        if (func.length) {\n            eval(\"p = (function proxy(\" + vars.substring(0, func.length * 2 - 1) +\n                \") { return p.invoke(func, this, slice.call(arguments)); });\");\n        }\n        else {\n            p = function proxy() {\n                return p.invoke(func, this, slice.call(arguments));\n            };\n        }\n        return p;\n    }\n\n    var uuid = 0;\n\n    // Public API\n    var spyApi = {\n        reset: function () {\n            this.called = false;\n            this.notCalled = true;\n            this.calledOnce = false;\n            this.calledTwice = false;\n            this.calledThrice = false;\n            this.callCount = 0;\n            this.firstCall = null;\n            this.secondCall = null;\n            this.thirdCall = null;\n            this.lastCall = null;\n            this.args = [];\n            this.returnValues = [];\n            this.thisValues = [];\n            this.exceptions = [];\n            this.callIds = [];\n            if (this.fakes) {\n                for (var i = 0; i < this.fakes.length; i++) {\n                    this.fakes[i].reset();\n                }\n            }\n        },\n\n        create: function create(func) {\n            var name;\n\n            if (typeof func != \"function\") {\n                func = function () { };\n            } else {\n                name = sinon.functionName(func);\n            }\n\n            var proxy = createProxy(func);\n\n            sinon.extend(proxy, spy);\n            delete proxy.create;\n            sinon.extend(proxy, func);\n\n            proxy.reset();\n            proxy.prototype = func.prototype;\n            proxy.displayName = name || \"spy\";\n            proxy.toString = sinon.functionToString;\n            proxy._create = sinon.spy.create;\n            proxy.id = \"spy#\" + uuid++;\n\n            return proxy;\n        },\n\n        invoke: function invoke(func, thisValue, args) {\n            var matching = matchingFake(this.fakes, args);\n            var exception, returnValue;\n\n            incrementCallCount.call(this);\n            push.call(this.thisValues, thisValue);\n            push.call(this.args, args);\n            push.call(this.callIds, callId++);\n\n            try {\n                if (matching) {\n                    returnValue = matching.invoke(func, thisValue, args);\n                } else {\n                    returnValue = (this.func || func).apply(thisValue, args);\n                }\n\n                var thisCall = this.getCall(this.callCount - 1);\n                if (thisCall.calledWithNew() && typeof returnValue !== 'object') {\n                    returnValue = thisValue;\n                }\n            } catch (e) {\n                exception = e;\n            }\n\n            push.call(this.exceptions, exception);\n            push.call(this.returnValues, returnValue);\n\n            createCallProperties.call(this);\n\n            if (exception !== undefined) {\n                throw exception;\n            }\n\n            return returnValue;\n        },\n\n        getCall: function getCall(i) {\n            if (i < 0 || i >= this.callCount) {\n                return null;\n            }\n\n            return sinon.spyCall(this, this.thisValues[i], this.args[i],\n                                    this.returnValues[i], this.exceptions[i],\n                                    this.callIds[i]);\n        },\n\n        getCalls: function () {\n            var calls = [];\n            var i;\n\n            for (i = 0; i < this.callCount; i++) {\n                calls.push(this.getCall(i));\n            }\n\n            return calls;\n        },\n\n        calledBefore: function calledBefore(spyFn) {\n            if (!this.called) {\n                return false;\n            }\n\n            if (!spyFn.called) {\n                return true;\n            }\n\n            return this.callIds[0] < spyFn.callIds[spyFn.callIds.length - 1];\n        },\n\n        calledAfter: function calledAfter(spyFn) {\n            if (!this.called || !spyFn.called) {\n                return false;\n            }\n\n            return this.callIds[this.callCount - 1] > spyFn.callIds[spyFn.callCount - 1];\n        },\n\n        withArgs: function () {\n            var args = slice.call(arguments);\n\n            if (this.fakes) {\n                var match = matchingFake(this.fakes, args, true);\n\n                if (match) {\n                    return match;\n                }\n            } else {\n                this.fakes = [];\n            }\n\n            var original = this;\n            var fake = this._create();\n            fake.matchingAguments = args;\n            fake.parent = this;\n            push.call(this.fakes, fake);\n\n            fake.withArgs = function () {\n                return original.withArgs.apply(original, arguments);\n            };\n\n            for (var i = 0; i < this.args.length; i++) {\n                if (fake.matches(this.args[i])) {\n                    incrementCallCount.call(fake);\n                    push.call(fake.thisValues, this.thisValues[i]);\n                    push.call(fake.args, this.args[i]);\n                    push.call(fake.returnValues, this.returnValues[i]);\n                    push.call(fake.exceptions, this.exceptions[i]);\n                    push.call(fake.callIds, this.callIds[i]);\n                }\n            }\n            createCallProperties.call(fake);\n\n            return fake;\n        },\n\n        matches: function (args, strict) {\n            var margs = this.matchingAguments;\n\n            if (margs.length <= args.length &&\n                sinon.deepEqual(margs, args.slice(0, margs.length))) {\n                return !strict || margs.length == args.length;\n            }\n        },\n\n        printf: function (format) {\n            var spy = this;\n            var args = slice.call(arguments, 1);\n            var formatter;\n\n            return (format || \"\").replace(/%(.)/g, function (match, specifyer) {\n                formatter = spyApi.formatters[specifyer];\n\n                if (typeof formatter == \"function\") {\n                    return formatter.call(null, spy, args);\n                } else if (!isNaN(parseInt(specifyer, 10))) {\n                    return sinon.format(args[specifyer - 1]);\n                }\n\n                return \"%\" + specifyer;\n            });\n        }\n    };\n\n    function delegateToCalls(method, matchAny, actual, notCalled) {\n        spyApi[method] = function () {\n            if (!this.called) {\n                if (notCalled) {\n                    return notCalled.apply(this, arguments);\n                }\n                return false;\n            }\n\n            var currentCall;\n            var matches = 0;\n\n            for (var i = 0, l = this.callCount; i < l; i += 1) {\n                currentCall = this.getCall(i);\n\n                if (currentCall[actual || method].apply(currentCall, arguments)) {\n                    matches += 1;\n\n                    if (matchAny) {\n                        return true;\n                    }\n                }\n            }\n\n            return matches === this.callCount;\n        };\n    }\n\n    delegateToCalls(\"calledOn\", true);\n    delegateToCalls(\"alwaysCalledOn\", false, \"calledOn\");\n    delegateToCalls(\"calledWith\", true);\n    delegateToCalls(\"calledWithMatch\", true);\n    delegateToCalls(\"alwaysCalledWith\", false, \"calledWith\");\n    delegateToCalls(\"alwaysCalledWithMatch\", false, \"calledWithMatch\");\n    delegateToCalls(\"calledWithExactly\", true);\n    delegateToCalls(\"alwaysCalledWithExactly\", false, \"calledWithExactly\");\n    delegateToCalls(\"neverCalledWith\", false, \"notCalledWith\",\n        function () { return true; });\n    delegateToCalls(\"neverCalledWithMatch\", false, \"notCalledWithMatch\",\n        function () { return true; });\n    delegateToCalls(\"threw\", true);\n    delegateToCalls(\"alwaysThrew\", false, \"threw\");\n    delegateToCalls(\"returned\", true);\n    delegateToCalls(\"alwaysReturned\", false, \"returned\");\n    delegateToCalls(\"calledWithNew\", true);\n    delegateToCalls(\"alwaysCalledWithNew\", false, \"calledWithNew\");\n    delegateToCalls(\"callArg\", false, \"callArgWith\", function () {\n        throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n    });\n    spyApi.callArgWith = spyApi.callArg;\n    delegateToCalls(\"callArgOn\", false, \"callArgOnWith\", function () {\n        throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n    });\n    spyApi.callArgOnWith = spyApi.callArgOn;\n    delegateToCalls(\"yield\", false, \"yield\", function () {\n        throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n    });\n    // \"invokeCallback\" is an alias for \"yield\" since \"yield\" is invalid in strict mode.\n    spyApi.invokeCallback = spyApi.yield;\n    delegateToCalls(\"yieldOn\", false, \"yieldOn\", function () {\n        throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n    });\n    delegateToCalls(\"yieldTo\", false, \"yieldTo\", function (property) {\n        throw new Error(this.toString() + \" cannot yield to '\" + property +\n            \"' since it was not yet invoked.\");\n    });\n    delegateToCalls(\"yieldToOn\", false, \"yieldToOn\", function (property) {\n        throw new Error(this.toString() + \" cannot yield to '\" + property +\n            \"' since it was not yet invoked.\");\n    });\n\n    spyApi.formatters = {\n        \"c\": function (spy) {\n            return sinon.timesInWords(spy.callCount);\n        },\n\n        \"n\": function (spy) {\n            return spy.toString();\n        },\n\n        \"C\": function (spy) {\n            var calls = [];\n\n            for (var i = 0, l = spy.callCount; i < l; ++i) {\n                var stringifiedCall = \"    \" + spy.getCall(i).toString();\n                if (/\\n/.test(calls[i - 1])) {\n                    stringifiedCall = \"\\n\" + stringifiedCall;\n                }\n                push.call(calls, stringifiedCall);\n            }\n\n            return calls.length > 0 ? \"\\n\" + calls.join(\"\\n\") : \"\";\n        },\n\n        \"t\": function (spy) {\n            var objects = [];\n\n            for (var i = 0, l = spy.callCount; i < l; ++i) {\n                push.call(objects, sinon.format(spy.thisValues[i]));\n            }\n\n            return objects.join(\", \");\n        },\n\n        \"*\": function (spy, args) {\n            var formatted = [];\n\n            for (var i = 0, l = args.length; i < l; ++i) {\n                push.call(formatted, sinon.format(args[i]));\n            }\n\n            return formatted.join(\", \");\n        }\n    };\n\n    sinon.extend(spy, spyApi);\n\n    spy.spyCall = sinon.spyCall;\n\n    if (commonJSModule) {\n        module.exports = spy;\n    } else {\n        sinon.spy = spy;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n */\n/*jslint eqeqeq: false, onevar: false*/\n/*global module, require, sinon, process, setImmediate, setTimeout*/\n/**\n * Stub behavior\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @author Tim Fischbach (mail@timfischbach.de)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    var slice = Array.prototype.slice;\n    var join = Array.prototype.join;\n    var proto;\n\n    var nextTick = (function () {\n        if (typeof process === \"object\" && typeof process.nextTick === \"function\") {\n            return process.nextTick;\n        } else if (typeof setImmediate === \"function\") {\n            return setImmediate;\n        } else {\n            return function (callback) {\n                setTimeout(callback, 0);\n            };\n        }\n    })();\n\n    function throwsException(error, message) {\n        if (typeof error == \"string\") {\n            this.exception = new Error(message || \"\");\n            this.exception.name = error;\n        } else if (!error) {\n            this.exception = new Error(\"Error\");\n        } else {\n            this.exception = error;\n        }\n\n        return this;\n    }\n\n    function getCallback(behavior, args) {\n        var callArgAt = behavior.callArgAt;\n\n        if (callArgAt < 0) {\n            var callArgProp = behavior.callArgProp;\n\n            for (var i = 0, l = args.length; i < l; ++i) {\n                if (!callArgProp && typeof args[i] == \"function\") {\n                    return args[i];\n                }\n\n                if (callArgProp && args[i] &&\n                    typeof args[i][callArgProp] == \"function\") {\n                    return args[i][callArgProp];\n                }\n            }\n\n            return null;\n        }\n\n        return args[callArgAt];\n    }\n\n    function getCallbackError(behavior, func, args) {\n        if (behavior.callArgAt < 0) {\n            var msg;\n\n            if (behavior.callArgProp) {\n                msg = sinon.functionName(behavior.stub) +\n                    \" expected to yield to '\" + behavior.callArgProp +\n                    \"', but no object with such a property was passed.\";\n            } else {\n                msg = sinon.functionName(behavior.stub) +\n                    \" expected to yield, but no callback was passed.\";\n            }\n\n            if (args.length > 0) {\n                msg += \" Received [\" + join.call(args, \", \") + \"]\";\n            }\n\n            return msg;\n        }\n\n        return \"argument at index \" + behavior.callArgAt + \" is not a function: \" + func;\n    }\n\n    function callCallback(behavior, args) {\n        if (typeof behavior.callArgAt == \"number\") {\n            var func = getCallback(behavior, args);\n\n            if (typeof func != \"function\") {\n                throw new TypeError(getCallbackError(behavior, func, args));\n            }\n\n            if (behavior.callbackAsync) {\n                nextTick(function() {\n                    func.apply(behavior.callbackContext, behavior.callbackArguments);\n                });\n            } else {\n                func.apply(behavior.callbackContext, behavior.callbackArguments);\n            }\n        }\n    }\n\n    proto = {\n        create: function(stub) {\n            var behavior = sinon.extend({}, sinon.behavior);\n            delete behavior.create;\n            behavior.stub = stub;\n\n            return behavior;\n        },\n\n        isPresent: function() {\n            return (typeof this.callArgAt == 'number' ||\n                    this.exception ||\n                    typeof this.returnArgAt == 'number' ||\n                    this.returnThis ||\n                    this.returnValueDefined);\n        },\n\n        invoke: function(context, args) {\n            callCallback(this, args);\n\n            if (this.exception) {\n                throw this.exception;\n            } else if (typeof this.returnArgAt == 'number') {\n                return args[this.returnArgAt];\n            } else if (this.returnThis) {\n                return context;\n            }\n\n            return this.returnValue;\n        },\n\n        onCall: function(index) {\n            return this.stub.onCall(index);\n        },\n\n        onFirstCall: function() {\n            return this.stub.onFirstCall();\n        },\n\n        onSecondCall: function() {\n            return this.stub.onSecondCall();\n        },\n\n        onThirdCall: function() {\n            return this.stub.onThirdCall();\n        },\n\n        withArgs: function(/* arguments */) {\n            throw new Error('Defining a stub by invoking \"stub.onCall(...).withArgs(...)\" is not supported. ' +\n                            'Use \"stub.withArgs(...).onCall(...)\" to define sequential behavior for calls with certain arguments.');\n        },\n\n        callsArg: function callsArg(pos) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n\n            this.callArgAt = pos;\n            this.callbackArguments = [];\n            this.callbackContext = undefined;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        callsArgOn: function callsArgOn(pos, context) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n            if (typeof context != \"object\") {\n                throw new TypeError(\"argument context is not an object\");\n            }\n\n            this.callArgAt = pos;\n            this.callbackArguments = [];\n            this.callbackContext = context;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        callsArgWith: function callsArgWith(pos) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n\n            this.callArgAt = pos;\n            this.callbackArguments = slice.call(arguments, 1);\n            this.callbackContext = undefined;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        callsArgOnWith: function callsArgWith(pos, context) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n            if (typeof context != \"object\") {\n                throw new TypeError(\"argument context is not an object\");\n            }\n\n            this.callArgAt = pos;\n            this.callbackArguments = slice.call(arguments, 2);\n            this.callbackContext = context;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        yields: function () {\n            this.callArgAt = -1;\n            this.callbackArguments = slice.call(arguments, 0);\n            this.callbackContext = undefined;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        yieldsOn: function (context) {\n            if (typeof context != \"object\") {\n                throw new TypeError(\"argument context is not an object\");\n            }\n\n            this.callArgAt = -1;\n            this.callbackArguments = slice.call(arguments, 1);\n            this.callbackContext = context;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        yieldsTo: function (prop) {\n            this.callArgAt = -1;\n            this.callbackArguments = slice.call(arguments, 1);\n            this.callbackContext = undefined;\n            this.callArgProp = prop;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        yieldsToOn: function (prop, context) {\n            if (typeof context != \"object\") {\n                throw new TypeError(\"argument context is not an object\");\n            }\n\n            this.callArgAt = -1;\n            this.callbackArguments = slice.call(arguments, 2);\n            this.callbackContext = context;\n            this.callArgProp = prop;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n\n        \"throws\": throwsException,\n        throwsException: throwsException,\n\n        returns: function returns(value) {\n            this.returnValue = value;\n            this.returnValueDefined = true;\n\n            return this;\n        },\n\n        returnsArg: function returnsArg(pos) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n\n            this.returnArgAt = pos;\n\n            return this;\n        },\n\n        returnsThis: function returnsThis() {\n            this.returnThis = true;\n\n            return this;\n        }\n    };\n\n    // create asynchronous versions of callsArg* and yields* methods\n    for (var method in proto) {\n        // need to avoid creating anotherasync versions of the newly added async methods\n        if (proto.hasOwnProperty(method) &&\n            method.match(/^(callsArg|yields)/) &&\n            !method.match(/Async/)) {\n            proto[method + 'Async'] = (function (syncFnName) {\n                return function () {\n                    var result = this[syncFnName].apply(this, arguments);\n                    this.callbackAsync = true;\n                    return result;\n                };\n            })(method);\n        }\n    }\n\n    if (commonJSModule) {\n        module.exports = proto;\n    } else {\n        sinon.behavior = proto;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n/**\n * @depend ../sinon.js\n * @depend spy.js\n * @depend behavior.js\n */\n/*jslint eqeqeq: false, onevar: false*/\n/*global module, require, sinon*/\n/**\n * Stub functions\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function stub(object, property, func) {\n        if (!!func && typeof func != \"function\") {\n            throw new TypeError(\"Custom stub should be function\");\n        }\n\n        var wrapper;\n\n        if (func) {\n            wrapper = sinon.spy && sinon.spy.create ? sinon.spy.create(func) : func;\n        } else {\n            wrapper = stub.create();\n        }\n\n        if (!object && typeof property === \"undefined\") {\n            return sinon.stub.create();\n        }\n\n        if (typeof property === \"undefined\" && typeof object == \"object\") {\n            for (var prop in object) {\n                if (typeof object[prop] === \"function\") {\n                    stub(object, prop);\n                }\n            }\n\n            return object;\n        }\n\n        return sinon.wrapMethod(object, property, wrapper);\n    }\n\n    function getDefaultBehavior(stub) {\n        return stub.defaultBehavior || getParentBehaviour(stub) || sinon.behavior.create(stub);\n    }\n\n    function getParentBehaviour(stub) {\n        return (stub.parent && getCurrentBehavior(stub.parent));\n    }\n\n    function getCurrentBehavior(stub) {\n        var behavior = stub.behaviors[stub.callCount - 1];\n        return behavior && behavior.isPresent() ? behavior : getDefaultBehavior(stub);\n    }\n\n    var uuid = 0;\n\n    sinon.extend(stub, (function () {\n        var proto = {\n            create: function create() {\n                var functionStub = function () {\n                    return getCurrentBehavior(functionStub).invoke(this, arguments);\n                };\n\n                functionStub.id = \"stub#\" + uuid++;\n                var orig = functionStub;\n                functionStub = sinon.spy.create(functionStub);\n                functionStub.func = orig;\n\n                sinon.extend(functionStub, stub);\n                functionStub._create = sinon.stub.create;\n                functionStub.displayName = \"stub\";\n                functionStub.toString = sinon.functionToString;\n\n                functionStub.defaultBehavior = null;\n                functionStub.behaviors = [];\n\n                return functionStub;\n            },\n\n            resetBehavior: function () {\n                var i;\n\n                this.defaultBehavior = null;\n                this.behaviors = [];\n\n                delete this.returnValue;\n                delete this.returnArgAt;\n                this.returnThis = false;\n\n                if (this.fakes) {\n                    for (i = 0; i < this.fakes.length; i++) {\n                        this.fakes[i].resetBehavior();\n                    }\n                }\n            },\n\n            onCall: function(index) {\n                if (!this.behaviors[index]) {\n                    this.behaviors[index] = sinon.behavior.create(this);\n                }\n\n                return this.behaviors[index];\n            },\n\n            onFirstCall: function() {\n                return this.onCall(0);\n            },\n\n            onSecondCall: function() {\n                return this.onCall(1);\n            },\n\n            onThirdCall: function() {\n                return this.onCall(2);\n            }\n        };\n\n        for (var method in sinon.behavior) {\n            if (sinon.behavior.hasOwnProperty(method) &&\n                !proto.hasOwnProperty(method) &&\n                method != 'create' &&\n                method != 'withArgs' &&\n                method != 'invoke') {\n                proto[method] = (function(behaviorMethod) {\n                    return function() {\n                        this.defaultBehavior = this.defaultBehavior || sinon.behavior.create(this);\n                        this.defaultBehavior[behaviorMethod].apply(this.defaultBehavior, arguments);\n                        return this;\n                    };\n                }(method));\n            }\n        }\n\n        return proto;\n    }()));\n\n    if (commonJSModule) {\n        module.exports = stub;\n    } else {\n        sinon.stub = stub;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n * @depend stub.js\n */\n/*jslint eqeqeq: false, onevar: false, nomen: false*/\n/*global module, require, sinon*/\n/**\n * Mock functions.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n    var push = [].push;\n    var match;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    match = sinon.match;\n\n    if (!match && commonJSModule) {\n        match = require(\"./match\");\n    }\n\n    function mock(object) {\n        if (!object) {\n            return sinon.expectation.create(\"Anonymous mock\");\n        }\n\n        return mock.create(object);\n    }\n\n    sinon.mock = mock;\n\n    sinon.extend(mock, (function () {\n        function each(collection, callback) {\n            if (!collection) {\n                return;\n            }\n\n            for (var i = 0, l = collection.length; i < l; i += 1) {\n                callback(collection[i]);\n            }\n        }\n\n        return {\n            create: function create(object) {\n                if (!object) {\n                    throw new TypeError(\"object is null\");\n                }\n\n                var mockObject = sinon.extend({}, mock);\n                mockObject.object = object;\n                delete mockObject.create;\n\n                return mockObject;\n            },\n\n            expects: function expects(method) {\n                if (!method) {\n                    throw new TypeError(\"method is falsy\");\n                }\n\n                if (!this.expectations) {\n                    this.expectations = {};\n                    this.proxies = [];\n                }\n\n                if (!this.expectations[method]) {\n                    this.expectations[method] = [];\n                    var mockObject = this;\n\n                    sinon.wrapMethod(this.object, method, function () {\n                        return mockObject.invokeMethod(method, this, arguments);\n                    });\n\n                    push.call(this.proxies, method);\n                }\n\n                var expectation = sinon.expectation.create(method);\n                push.call(this.expectations[method], expectation);\n\n                return expectation;\n            },\n\n            restore: function restore() {\n                var object = this.object;\n\n                each(this.proxies, function (proxy) {\n                    if (typeof object[proxy].restore == \"function\") {\n                        object[proxy].restore();\n                    }\n                });\n            },\n\n            verify: function verify() {\n                var expectations = this.expectations || {};\n                var messages = [], met = [];\n\n                each(this.proxies, function (proxy) {\n                    each(expectations[proxy], function (expectation) {\n                        if (!expectation.met()) {\n                            push.call(messages, expectation.toString());\n                        } else {\n                            push.call(met, expectation.toString());\n                        }\n                    });\n                });\n\n                this.restore();\n\n                if (messages.length > 0) {\n                    sinon.expectation.fail(messages.concat(met).join(\"\\n\"));\n                } else {\n                    sinon.expectation.pass(messages.concat(met).join(\"\\n\"));\n                }\n\n                return true;\n            },\n\n            invokeMethod: function invokeMethod(method, thisValue, args) {\n                var expectations = this.expectations && this.expectations[method];\n                var length = expectations && expectations.length || 0, i;\n\n                for (i = 0; i < length; i += 1) {\n                    if (!expectations[i].met() &&\n                        expectations[i].allowsCall(thisValue, args)) {\n                        return expectations[i].apply(thisValue, args);\n                    }\n                }\n\n                var messages = [], available, exhausted = 0;\n\n                for (i = 0; i < length; i += 1) {\n                    if (expectations[i].allowsCall(thisValue, args)) {\n                        available = available || expectations[i];\n                    } else {\n                        exhausted += 1;\n                    }\n                    push.call(messages, \"    \" + expectations[i].toString());\n                }\n\n                if (exhausted === 0) {\n                    return available.apply(thisValue, args);\n                }\n\n                messages.unshift(\"Unexpected call: \" + sinon.spyCall.toString.call({\n                    proxy: method,\n                    args: args\n                }));\n\n                sinon.expectation.fail(messages.join(\"\\n\"));\n            }\n        };\n    }()));\n\n    var times = sinon.timesInWords;\n\n    sinon.expectation = (function () {\n        var slice = Array.prototype.slice;\n        var _invoke = sinon.spy.invoke;\n\n        function callCountInWords(callCount) {\n            if (callCount == 0) {\n                return \"never called\";\n            } else {\n                return \"called \" + times(callCount);\n            }\n        }\n\n        function expectedCallCountInWords(expectation) {\n            var min = expectation.minCalls;\n            var max = expectation.maxCalls;\n\n            if (typeof min == \"number\" && typeof max == \"number\") {\n                var str = times(min);\n\n                if (min != max) {\n                    str = \"at least \" + str + \" and at most \" + times(max);\n                }\n\n                return str;\n            }\n\n            if (typeof min == \"number\") {\n                return \"at least \" + times(min);\n            }\n\n            return \"at most \" + times(max);\n        }\n\n        function receivedMinCalls(expectation) {\n            var hasMinLimit = typeof expectation.minCalls == \"number\";\n            return !hasMinLimit || expectation.callCount >= expectation.minCalls;\n        }\n\n        function receivedMaxCalls(expectation) {\n            if (typeof expectation.maxCalls != \"number\") {\n                return false;\n            }\n\n            return expectation.callCount == expectation.maxCalls;\n        }\n\n        function verifyMatcher(possibleMatcher, arg){\n            if (match && match.isMatcher(possibleMatcher)) {\n                return possibleMatcher.test(arg);\n            } else {\n                return true;\n            }\n        }\n\n        return {\n            minCalls: 1,\n            maxCalls: 1,\n\n            create: function create(methodName) {\n                var expectation = sinon.extend(sinon.stub.create(), sinon.expectation);\n                delete expectation.create;\n                expectation.method = methodName;\n\n                return expectation;\n            },\n\n            invoke: function invoke(func, thisValue, args) {\n                this.verifyCallAllowed(thisValue, args);\n\n                return _invoke.apply(this, arguments);\n            },\n\n            atLeast: function atLeast(num) {\n                if (typeof num != \"number\") {\n                    throw new TypeError(\"'\" + num + \"' is not number\");\n                }\n\n                if (!this.limitsSet) {\n                    this.maxCalls = null;\n                    this.limitsSet = true;\n                }\n\n                this.minCalls = num;\n\n                return this;\n            },\n\n            atMost: function atMost(num) {\n                if (typeof num != \"number\") {\n                    throw new TypeError(\"'\" + num + \"' is not number\");\n                }\n\n                if (!this.limitsSet) {\n                    this.minCalls = null;\n                    this.limitsSet = true;\n                }\n\n                this.maxCalls = num;\n\n                return this;\n            },\n\n            never: function never() {\n                return this.exactly(0);\n            },\n\n            once: function once() {\n                return this.exactly(1);\n            },\n\n            twice: function twice() {\n                return this.exactly(2);\n            },\n\n            thrice: function thrice() {\n                return this.exactly(3);\n            },\n\n            exactly: function exactly(num) {\n                if (typeof num != \"number\") {\n                    throw new TypeError(\"'\" + num + \"' is not a number\");\n                }\n\n                this.atLeast(num);\n                return this.atMost(num);\n            },\n\n            met: function met() {\n                return !this.failed && receivedMinCalls(this);\n            },\n\n            verifyCallAllowed: function verifyCallAllowed(thisValue, args) {\n                if (receivedMaxCalls(this)) {\n                    this.failed = true;\n                    sinon.expectation.fail(this.method + \" already called \" + times(this.maxCalls));\n                }\n\n                if (\"expectedThis\" in this && this.expectedThis !== thisValue) {\n                    sinon.expectation.fail(this.method + \" called with \" + thisValue + \" as thisValue, expected \" +\n                        this.expectedThis);\n                }\n\n                if (!(\"expectedArguments\" in this)) {\n                    return;\n                }\n\n                if (!args) {\n                    sinon.expectation.fail(this.method + \" received no arguments, expected \" +\n                        sinon.format(this.expectedArguments));\n                }\n\n                if (args.length < this.expectedArguments.length) {\n                    sinon.expectation.fail(this.method + \" received too few arguments (\" + sinon.format(args) +\n                        \"), expected \" + sinon.format(this.expectedArguments));\n                }\n\n                if (this.expectsExactArgCount &&\n                    args.length != this.expectedArguments.length) {\n                    sinon.expectation.fail(this.method + \" received too many arguments (\" + sinon.format(args) +\n                        \"), expected \" + sinon.format(this.expectedArguments));\n                }\n\n                for (var i = 0, l = this.expectedArguments.length; i < l; i += 1) {\n\n                    if (!verifyMatcher(this.expectedArguments[i],args[i])) {\n                        sinon.expectation.fail(this.method + \" received wrong arguments \" + sinon.format(args) +\n                            \", didn't match \" + this.expectedArguments.toString());\n                    }\n\n                    if (!sinon.deepEqual(this.expectedArguments[i], args[i])) {\n                        sinon.expectation.fail(this.method + \" received wrong arguments \" + sinon.format(args) +\n                            \", expected \" + sinon.format(this.expectedArguments));\n                    }\n                }\n            },\n\n            allowsCall: function allowsCall(thisValue, args) {\n                if (this.met() && receivedMaxCalls(this)) {\n                    return false;\n                }\n\n                if (\"expectedThis\" in this && this.expectedThis !== thisValue) {\n                    return false;\n                }\n\n                if (!(\"expectedArguments\" in this)) {\n                    return true;\n                }\n\n                args = args || [];\n\n                if (args.length < this.expectedArguments.length) {\n                    return false;\n                }\n\n                if (this.expectsExactArgCount &&\n                    args.length != this.expectedArguments.length) {\n                    return false;\n                }\n\n                for (var i = 0, l = this.expectedArguments.length; i < l; i += 1) {\n                    if (!verifyMatcher(this.expectedArguments[i],args[i])) {\n                        return false;\n                    }\n\n                    if (!sinon.deepEqual(this.expectedArguments[i], args[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            withArgs: function withArgs() {\n                this.expectedArguments = slice.call(arguments);\n                return this;\n            },\n\n            withExactArgs: function withExactArgs() {\n                this.withArgs.apply(this, arguments);\n                this.expectsExactArgCount = true;\n                return this;\n            },\n\n            on: function on(thisValue) {\n                this.expectedThis = thisValue;\n                return this;\n            },\n\n            toString: function () {\n                var args = (this.expectedArguments || []).slice();\n\n                if (!this.expectsExactArgCount) {\n                    push.call(args, \"[...]\");\n                }\n\n                var callStr = sinon.spyCall.toString.call({\n                    proxy: this.method || \"anonymous mock expectation\",\n                    args: args\n                });\n\n                var message = callStr.replace(\", [...\", \"[, ...\") + \" \" +\n                    expectedCallCountInWords(this);\n\n                if (this.met()) {\n                    return \"Expectation met: \" + message;\n                }\n\n                return \"Expected \" + message + \" (\" +\n                    callCountInWords(this.callCount) + \")\";\n            },\n\n            verify: function verify() {\n                if (!this.met()) {\n                    sinon.expectation.fail(this.toString());\n                } else {\n                    sinon.expectation.pass(this.toString());\n                }\n\n                return true;\n            },\n\n            pass: function(message) {\n              sinon.assert.pass(message);\n            },\n            fail: function (message) {\n                var exception = new Error(message);\n                exception.name = \"ExpectationError\";\n\n                throw exception;\n            }\n        };\n    }());\n\n    if (commonJSModule) {\n        module.exports = mock;\n    } else {\n        sinon.mock = mock;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n * @depend stub.js\n * @depend mock.js\n */\n/*jslint eqeqeq: false, onevar: false, forin: true*/\n/*global module, require, sinon*/\n/**\n * Collections of stubs, spies and mocks.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n    var push = [].push;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function getFakes(fakeCollection) {\n        if (!fakeCollection.fakes) {\n            fakeCollection.fakes = [];\n        }\n\n        return fakeCollection.fakes;\n    }\n\n    function each(fakeCollection, method) {\n        var fakes = getFakes(fakeCollection);\n\n        for (var i = 0, l = fakes.length; i < l; i += 1) {\n            if (typeof fakes[i][method] == \"function\") {\n                fakes[i][method]();\n            }\n        }\n    }\n\n    function compact(fakeCollection) {\n        var fakes = getFakes(fakeCollection);\n        var i = 0;\n        while (i < fakes.length) {\n          fakes.splice(i, 1);\n        }\n    }\n\n    var collection = {\n        verify: function resolve() {\n            each(this, \"verify\");\n        },\n\n        restore: function restore() {\n            each(this, \"restore\");\n            compact(this);\n        },\n\n        verifyAndRestore: function verifyAndRestore() {\n            var exception;\n\n            try {\n                this.verify();\n            } catch (e) {\n                exception = e;\n            }\n\n            this.restore();\n\n            if (exception) {\n                throw exception;\n            }\n        },\n\n        add: function add(fake) {\n            push.call(getFakes(this), fake);\n            return fake;\n        },\n\n        spy: function spy() {\n            return this.add(sinon.spy.apply(sinon, arguments));\n        },\n\n        stub: function stub(object, property, value) {\n            if (property) {\n                var original = object[property];\n\n                if (typeof original != \"function\") {\n                    if (!hasOwnProperty.call(object, property)) {\n                        throw new TypeError(\"Cannot stub non-existent own property \" + property);\n                    }\n\n                    object[property] = value;\n\n                    return this.add({\n                        restore: function () {\n                            object[property] = original;\n                        }\n                    });\n                }\n            }\n            if (!property && !!object && typeof object == \"object\") {\n                var stubbedObj = sinon.stub.apply(sinon, arguments);\n\n                for (var prop in stubbedObj) {\n                    if (typeof stubbedObj[prop] === \"function\") {\n                        this.add(stubbedObj[prop]);\n                    }\n                }\n\n                return stubbedObj;\n            }\n\n            return this.add(sinon.stub.apply(sinon, arguments));\n        },\n\n        mock: function mock() {\n            return this.add(sinon.mock.apply(sinon, arguments));\n        },\n\n        inject: function inject(obj) {\n            var col = this;\n\n            obj.spy = function () {\n                return col.spy.apply(col, arguments);\n            };\n\n            obj.stub = function () {\n                return col.stub.apply(col, arguments);\n            };\n\n            obj.mock = function () {\n                return col.mock.apply(col, arguments);\n            };\n\n            return obj;\n        }\n    };\n\n    if (commonJSModule) {\n        module.exports = collection;\n    } else {\n        sinon.collection = collection;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/*jslint eqeqeq: false, plusplus: false, evil: true, onevar: false, browser: true, forin: false*/\n/*global module, require, window*/\n/**\n * Fake timer API\n * setTimeout\n * setInterval\n * clearTimeout\n * clearInterval\n * tick\n * reset\n * Date\n *\n * Inspired by jsUnitMockTimeOut from JsUnit\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nif (typeof sinon == \"undefined\") {\n    var sinon = {};\n}\n\n(function (global) {\n    // node expects setTimeout/setInterval to return a fn object w/ .ref()/.unref()\n    // browsers, a number.\n    // see https://github.com/cjohansen/Sinon.JS/pull/436\n    var timeoutResult = setTimeout(function() {}, 0);\n    var addTimerReturnsObject = typeof timeoutResult === 'object';\n    clearTimeout(timeoutResult);\n\n    var id = 1;\n\n    function addTimer(args, recurring) {\n        if (args.length === 0) {\n            throw new Error(\"Function requires at least 1 parameter\");\n        }\n\n        if (typeof args[0] === \"undefined\") {\n            throw new Error(\"Callback must be provided to timer calls\");\n        }\n\n        var toId = id++;\n        var delay = args[1] || 0;\n\n        if (!this.timeouts) {\n            this.timeouts = {};\n        }\n\n        this.timeouts[toId] = {\n            id: toId,\n            func: args[0],\n            callAt: this.now + delay,\n            invokeArgs: Array.prototype.slice.call(args, 2)\n        };\n\n        if (recurring === true) {\n            this.timeouts[toId].interval = delay;\n        }\n\n        if (addTimerReturnsObject) {\n            return {\n                id: toId,\n                ref: function() {},\n                unref: function() {}\n            };\n        }\n        else {\n            return toId;\n        }\n    }\n\n    function parseTime(str) {\n        if (!str) {\n            return 0;\n        }\n\n        var strings = str.split(\":\");\n        var l = strings.length, i = l;\n        var ms = 0, parsed;\n\n        if (l > 3 || !/^(\\d\\d:){0,2}\\d\\d?$/.test(str)) {\n            throw new Error(\"tick only understands numbers and 'h:m:s'\");\n        }\n\n        while (i--) {\n            parsed = parseInt(strings[i], 10);\n\n            if (parsed >= 60) {\n                throw new Error(\"Invalid time \" + str);\n            }\n\n            ms += parsed * Math.pow(60, (l - i - 1));\n        }\n\n        return ms * 1000;\n    }\n\n    function createObject(object) {\n        var newObject;\n\n        if (Object.create) {\n            newObject = Object.create(object);\n        } else {\n            var F = function () {};\n            F.prototype = object;\n            newObject = new F();\n        }\n\n        newObject.Date.clock = newObject;\n        return newObject;\n    }\n\n    sinon.clock = {\n        now: 0,\n\n        create: function create(now) {\n            var clock = createObject(this);\n\n            if (typeof now == \"number\") {\n                clock.now = now;\n            }\n\n            if (!!now && typeof now == \"object\") {\n                throw new TypeError(\"now should be milliseconds since UNIX epoch\");\n            }\n\n            return clock;\n        },\n\n        setTimeout: function setTimeout(callback, timeout) {\n            return addTimer.call(this, arguments, false);\n        },\n\n        clearTimeout: function clearTimeout(timerId) {\n            if (!this.timeouts) {\n                this.timeouts = [];\n            }\n\n            if (timerId in this.timeouts) {\n                delete this.timeouts[timerId];\n            }\n        },\n\n        setInterval: function setInterval(callback, timeout) {\n            return addTimer.call(this, arguments, true);\n        },\n\n        clearInterval: function clearInterval(timerId) {\n            this.clearTimeout(timerId);\n        },\n\n        setImmediate: function setImmediate(callback) {\n            var passThruArgs = Array.prototype.slice.call(arguments, 1);\n\n            return addTimer.call(this, [callback, 0].concat(passThruArgs), false);\n        },\n\n        clearImmediate: function clearImmediate(timerId) {\n            this.clearTimeout(timerId);\n        },\n\n        tick: function tick(ms) {\n            ms = typeof ms == \"number\" ? ms : parseTime(ms);\n            var tickFrom = this.now, tickTo = this.now + ms, previous = this.now;\n            var timer = this.firstTimerInRange(tickFrom, tickTo);\n\n            var firstException;\n            while (timer && tickFrom <= tickTo) {\n                if (this.timeouts[timer.id]) {\n                    tickFrom = this.now = timer.callAt;\n                    try {\n                      this.callTimer(timer);\n                    } catch (e) {\n                      firstException = firstException || e;\n                    }\n                }\n\n                timer = this.firstTimerInRange(previous, tickTo);\n                previous = tickFrom;\n            }\n\n            this.now = tickTo;\n\n            if (firstException) {\n              throw firstException;\n            }\n\n            return this.now;\n        },\n\n        firstTimerInRange: function (from, to) {\n            var timer, smallest = null, originalTimer;\n\n            for (var id in this.timeouts) {\n                if (this.timeouts.hasOwnProperty(id)) {\n                    if (this.timeouts[id].callAt < from || this.timeouts[id].callAt > to) {\n                        continue;\n                    }\n\n                    if (smallest === null || this.timeouts[id].callAt < smallest) {\n                        originalTimer = this.timeouts[id];\n                        smallest = this.timeouts[id].callAt;\n\n                        timer = {\n                            func: this.timeouts[id].func,\n                            callAt: this.timeouts[id].callAt,\n                            interval: this.timeouts[id].interval,\n                            id: this.timeouts[id].id,\n                            invokeArgs: this.timeouts[id].invokeArgs\n                        };\n                    }\n                }\n            }\n\n            return timer || null;\n        },\n\n        callTimer: function (timer) {\n            if (typeof timer.interval == \"number\") {\n                this.timeouts[timer.id].callAt += timer.interval;\n            } else {\n                delete this.timeouts[timer.id];\n            }\n\n            try {\n                if (typeof timer.func == \"function\") {\n                    timer.func.apply(null, timer.invokeArgs);\n                } else {\n                    eval(timer.func);\n                }\n            } catch (e) {\n              var exception = e;\n            }\n\n            if (!this.timeouts[timer.id]) {\n                if (exception) {\n                  throw exception;\n                }\n                return;\n            }\n\n            if (exception) {\n              throw exception;\n            }\n        },\n\n        reset: function reset() {\n            this.timeouts = {};\n        },\n\n        Date: (function () {\n            var NativeDate = Date;\n\n            function ClockDate(year, month, date, hour, minute, second, ms) {\n                // Defensive and verbose to avoid potential harm in passing\n                // explicit undefined when user does not pass argument\n                switch (arguments.length) {\n                case 0:\n                    return new NativeDate(ClockDate.clock.now);\n                case 1:\n                    return new NativeDate(year);\n                case 2:\n                    return new NativeDate(year, month);\n                case 3:\n                    return new NativeDate(year, month, date);\n                case 4:\n                    return new NativeDate(year, month, date, hour);\n                case 5:\n                    return new NativeDate(year, month, date, hour, minute);\n                case 6:\n                    return new NativeDate(year, month, date, hour, minute, second);\n                default:\n                    return new NativeDate(year, month, date, hour, minute, second, ms);\n                }\n            }\n\n            return mirrorDateProperties(ClockDate, NativeDate);\n        }())\n    };\n\n    function mirrorDateProperties(target, source) {\n        if (source.now) {\n            target.now = function now() {\n                return target.clock.now;\n            };\n        } else {\n            delete target.now;\n        }\n\n        if (source.toSource) {\n            target.toSource = function toSource() {\n                return source.toSource();\n            };\n        } else {\n            delete target.toSource;\n        }\n\n        target.toString = function toString() {\n            return source.toString();\n        };\n\n        target.prototype = source.prototype;\n        target.parse = source.parse;\n        target.UTC = source.UTC;\n        target.prototype.toUTCString = source.prototype.toUTCString;\n\n        for (var prop in source) {\n            if (source.hasOwnProperty(prop)) {\n                target[prop] = source[prop];\n            }\n        }\n\n        return target;\n    }\n\n    var methods = [\"Date\", \"setTimeout\", \"setInterval\",\n                   \"clearTimeout\", \"clearInterval\"];\n\n    if (typeof global.setImmediate !== \"undefined\") {\n        methods.push(\"setImmediate\");\n    }\n\n    if (typeof global.clearImmediate !== \"undefined\") {\n        methods.push(\"clearImmediate\");\n    }\n\n    function restore() {\n        var method;\n\n        for (var i = 0, l = this.methods.length; i < l; i++) {\n            method = this.methods[i];\n\n            if (global[method].hadOwnProperty) {\n                global[method] = this[\"_\" + method];\n            } else {\n                try {\n                    delete global[method];\n                } catch (e) {}\n            }\n        }\n\n        // Prevent multiple executions which will completely remove these props\n        this.methods = [];\n      \n        qx.util.DeferredCallManager.getInstance().refreshTimeout();\n    }\n\n    function stubGlobal(method, clock) {\n        clock[method].hadOwnProperty = Object.prototype.hasOwnProperty.call(global, method);\n        clock[\"_\" + method] = global[method];\n\n        if (method == \"Date\") {\n            var date = mirrorDateProperties(clock[method], global[method]);\n            global[method] = date;\n        } else {\n            global[method] = function () {\n                return clock[method].apply(clock, arguments);\n            };\n\n            for (var prop in clock[method]) {\n                if (clock[method].hasOwnProperty(prop)) {\n                    global[method][prop] = clock[method][prop];\n                }\n            }\n        }\n\n        global[method].clock = clock;\n    }\n\n    sinon.useFakeTimers = function useFakeTimers(now) {\n        var clock = sinon.clock.create(now);\n        clock.restore = restore;\n        clock.methods = Array.prototype.slice.call(arguments,\n                                                   typeof now == \"number\" ? 1 : 0);\n\n        if (clock.methods.length === 0) {\n            clock.methods = methods;\n        }\n\n        for (var i = 0, l = clock.methods.length; i < l; i++) {\n            stubGlobal(clock.methods[i], clock);\n        }\n\n        return clock;\n    };\n}(typeof global != \"undefined\" && typeof global !== \"function\" ? global : this));\n\nsinon.timers = {\n    setTimeout: setTimeout,\n    clearTimeout: clearTimeout,\n    setImmediate: (typeof setImmediate !== \"undefined\" ? setImmediate : undefined),\n    clearImmediate: (typeof clearImmediate !== \"undefined\" ? clearImmediate: undefined),\n    setInterval: setInterval,\n    clearInterval: clearInterval,\n    Date: Date\n};\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = sinon;\n}\n\n/*jslint eqeqeq: false, onevar: false*/\n/*global sinon, module, require, ActiveXObject, XMLHttpRequest, DOMParser*/\n/**\n * Minimal Event interface implementation\n *\n * Original implementation by Sven Fuchs: https://gist.github.com/995028\n * Modifications and tests by Christian Johansen.\n *\n * @author Sven Fuchs (svenfuchs@artweb-design.de)\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2011 Sven Fuchs, Christian Johansen\n */\n\nif (typeof sinon == \"undefined\") {\n    this.sinon = {};\n}\n\n(function () {\n    var push = [].push;\n\n    sinon.Event = function Event(type, bubbles, cancelable, target) {\n        this.initEvent(type, bubbles, cancelable, target);\n    };\n\n    sinon.Event.prototype = {\n        initEvent: function(type, bubbles, cancelable, target) {\n            this.type = type;\n            this.bubbles = bubbles;\n            this.cancelable = cancelable;\n            this.target = target;\n        },\n\n        stopPropagation: function () {},\n\n        preventDefault: function () {\n            this.defaultPrevented = true;\n        }\n    };\n\n    sinon.ProgressEvent = function ProgressEvent(type, progressEventRaw, target) {\n        this.initEvent(type, false, false, target);\n        this.loaded = progressEventRaw.loaded || null;\n        this.total = progressEventRaw.total || null;\n    };\n\n    sinon.ProgressEvent.prototype = new sinon.Event();\n\n    sinon.ProgressEvent.prototype.constructor =  sinon.ProgressEvent;\n\n    sinon.CustomEvent = function CustomEvent(type, customData, target) {\n        this.initEvent(type, false, false, target);\n        this.detail = customData.detail || null;\n    };\n\n    sinon.CustomEvent.prototype = new sinon.Event();\n\n    sinon.CustomEvent.prototype.constructor =  sinon.CustomEvent;\n\n    sinon.EventTarget = {\n        addEventListener: function addEventListener(event, listener) {\n            this.eventListeners = this.eventListeners || {};\n            this.eventListeners[event] = this.eventListeners[event] || [];\n            push.call(this.eventListeners[event], listener);\n        },\n\n        removeEventListener: function removeEventListener(event, listener) {\n            var listeners = this.eventListeners && this.eventListeners[event] || [];\n\n            for (var i = 0, l = listeners.length; i < l; ++i) {\n                if (listeners[i] == listener) {\n                    return listeners.splice(i, 1);\n                }\n            }\n        },\n\n        dispatchEvent: function dispatchEvent(event) {\n            var type = event.type;\n            var listeners = this.eventListeners && this.eventListeners[type] || [];\n\n            for (var i = 0; i < listeners.length; i++) {\n                if (typeof listeners[i] == \"function\") {\n                    listeners[i].call(this, event);\n                } else {\n                    listeners[i].handleEvent(event);\n                }\n            }\n\n            return !!event.defaultPrevented;\n        }\n    };\n}());\n\n/**\n * @depend ../../sinon.js\n * @depend event.js\n */\n/*jslint eqeqeq: false, onevar: false*/\n/*global sinon, module, require, ActiveXObject, XMLHttpRequest, DOMParser*/\n/**\n * Fake XMLHttpRequest object\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n// wrapper for global\n(function(global) {\n    if (typeof sinon === \"undefined\") {\n        global.sinon = {};\n    }\n\n    var supportsProgress = typeof ProgressEvent !== \"undefined\";\n    var supportsCustomEvent = typeof CustomEvent !== \"undefined\";\n    sinon.xhr = { XMLHttpRequest: global.XMLHttpRequest };\n    var xhr = sinon.xhr;\n    xhr.GlobalXMLHttpRequest = global.XMLHttpRequest;\n    xhr.GlobalActiveXObject = global.ActiveXObject;\n    xhr.supportsActiveX = typeof xhr.GlobalActiveXObject != \"undefined\";\n    xhr.supportsXHR = typeof xhr.GlobalXMLHttpRequest != \"undefined\";\n    xhr.workingXHR = xhr.supportsXHR ? xhr.GlobalXMLHttpRequest : xhr.supportsActiveX\n                                     ? function() { return new xhr.GlobalActiveXObject(\"MSXML2.XMLHTTP.3.0\") } : false;\n    xhr.supportsCORS = 'withCredentials' in (new sinon.xhr.GlobalXMLHttpRequest());\n\n    /*jsl:ignore*/\n    var unsafeHeaders = {\n        \"Accept-Charset\": true,\n        \"Accept-Encoding\": true,\n        \"Connection\": true,\n        \"Content-Length\": true,\n        \"Cookie\": true,\n        \"Cookie2\": true,\n        \"Content-Transfer-Encoding\": true,\n        \"Date\": true,\n        \"Expect\": true,\n        \"Host\": true,\n        \"Keep-Alive\": true,\n        \"Referer\": true,\n        \"TE\": true,\n        \"Trailer\": true,\n        \"Transfer-Encoding\": true,\n        \"Upgrade\": true,\n        \"User-Agent\": true,\n        \"Via\": true\n    };\n    /*jsl:end*/\n\n    function FakeXMLHttpRequest() {\n        this.readyState = FakeXMLHttpRequest.UNSENT;\n        this.requestHeaders = {};\n        this.requestBody = null;\n        this.status = 0;\n        this.statusText = \"\";\n        this.upload = new UploadProgress();\n        if (sinon.xhr.supportsCORS) {\n            this.withCredentials = false;\n        }\n\n\n        var xhr = this;\n        var events = [\"loadstart\", \"load\", \"abort\", \"loadend\"];\n\n        function addEventListener(eventName) {\n            xhr.addEventListener(eventName, function (event) {\n                var listener = xhr[\"on\" + eventName];\n\n                if (listener && typeof listener == \"function\") {\n                    listener.call(this, event);\n                }\n            });\n        }\n\n        for (var i = events.length - 1; i >= 0; i--) {\n            addEventListener(events[i]);\n        }\n\n        if (typeof FakeXMLHttpRequest.onCreate == \"function\") {\n            FakeXMLHttpRequest.onCreate(this);\n        }\n    }\n\n    // An upload object is created for each\n    // FakeXMLHttpRequest and allows upload\n    // events to be simulated using uploadProgress\n    // and uploadError.\n    function UploadProgress() {\n        this.eventListeners = {\n            \"progress\": [],\n            \"load\": [],\n            \"abort\": [],\n            \"error\": []\n        }\n    }\n\n    UploadProgress.prototype.addEventListener = function(event, listener) {\n        this.eventListeners[event].push(listener);\n    };\n\n    UploadProgress.prototype.removeEventListener = function(event, listener) {\n        var listeners = this.eventListeners[event] || [];\n\n        for (var i = 0, l = listeners.length; i < l; ++i) {\n            if (listeners[i] == listener) {\n                return listeners.splice(i, 1);\n            }\n        }\n    };\n\n    UploadProgress.prototype.dispatchEvent = function(event) {\n        var listeners = this.eventListeners[event.type] || [];\n\n        for (var i = 0, listener; (listener = listeners[i]) != null; i++) {\n            listener(event);\n        }\n    };\n\n    function verifyState(xhr) {\n        if (xhr.readyState !== FakeXMLHttpRequest.OPENED) {\n            throw new Error(\"INVALID_STATE_ERR\");\n        }\n\n        if (xhr.sendFlag) {\n            throw new Error(\"INVALID_STATE_ERR\");\n        }\n    }\n\n    // filtering to enable a white-list version of Sinon FakeXhr,\n    // where whitelisted requests are passed through to real XHR\n    function each(collection, callback) {\n        if (!collection) return;\n        for (var i = 0, l = collection.length; i < l; i += 1) {\n            callback(collection[i]);\n        }\n    }\n    function some(collection, callback) {\n        for (var index = 0; index < collection.length; index++) {\n            if(callback(collection[index]) === true) return true;\n        }\n        return false;\n    }\n    // largest arity in XHR is 5 - XHR#open\n    var apply = function(obj,method,args) {\n        switch(args.length) {\n        case 0: return obj[method]();\n        case 1: return obj[method](args[0]);\n        case 2: return obj[method](args[0],args[1]);\n        case 3: return obj[method](args[0],args[1],args[2]);\n        case 4: return obj[method](args[0],args[1],args[2],args[3]);\n        case 5: return obj[method](args[0],args[1],args[2],args[3],args[4]);\n        }\n    };\n\n    FakeXMLHttpRequest.filters = [];\n    FakeXMLHttpRequest.addFilter = function(fn) {\n        this.filters.push(fn)\n    };\n    var IE6Re = /MSIE 6/;\n    FakeXMLHttpRequest.defake = function(fakeXhr,xhrArgs) {\n        var xhr = new sinon.xhr.workingXHR();\n        each([\"open\",\"setRequestHeader\",\"send\",\"abort\",\"getResponseHeader\",\n              \"getAllResponseHeaders\",\"addEventListener\",\"overrideMimeType\",\"removeEventListener\"],\n             function(method) {\n                 fakeXhr[method] = function() {\n                   return apply(xhr,method,arguments);\n                 };\n             });\n\n        var copyAttrs = function(args) {\n            each(args, function(attr) {\n              try {\n                fakeXhr[attr] = xhr[attr]\n              } catch(e) {\n                if(!IE6Re.test(navigator.userAgent)) throw e;\n              }\n            });\n        };\n\n        var stateChange = function() {\n            fakeXhr.readyState = xhr.readyState;\n            if(xhr.readyState >= FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                copyAttrs([\"status\",\"statusText\"]);\n            }\n            if(xhr.readyState >= FakeXMLHttpRequest.LOADING) {\n                copyAttrs([\"responseText\"]);\n            }\n            if(xhr.readyState === FakeXMLHttpRequest.DONE) {\n                copyAttrs([\"responseXML\"]);\n            }\n            if(fakeXhr.onreadystatechange) fakeXhr.onreadystatechange.call(fakeXhr, { target: fakeXhr });\n        };\n        if(xhr.addEventListener) {\n          for(var event in fakeXhr.eventListeners) {\n              if(fakeXhr.eventListeners.hasOwnProperty(event)) {\n                  each(fakeXhr.eventListeners[event],function(handler) {\n                      xhr.addEventListener(event, handler);\n                  });\n              }\n          }\n          xhr.addEventListener(\"readystatechange\",stateChange);\n        } else {\n          xhr.onreadystatechange = stateChange;\n        }\n        apply(xhr,\"open\",xhrArgs);\n    };\n    FakeXMLHttpRequest.useFilters = false;\n\n    function verifyRequestOpened(xhr) {\n        if (xhr.readyState != FakeXMLHttpRequest.OPENED) {\n            throw new Error(\"INVALID_STATE_ERR - \" + xhr.readyState);\n        }\n    }\n\n    function verifyRequestSent(xhr) {\n        if (xhr.readyState == FakeXMLHttpRequest.DONE) {\n            throw new Error(\"Request done\");\n        }\n    }\n\n    function verifyHeadersReceived(xhr) {\n        if (xhr.async && xhr.readyState != FakeXMLHttpRequest.HEADERS_RECEIVED) {\n            throw new Error(\"No headers received\");\n        }\n    }\n\n    function verifyResponseBodyType(body) {\n        if (typeof body != \"string\") {\n            var error = new Error(\"Attempted to respond to fake XMLHttpRequest with \" +\n                                 body + \", which is not a string.\");\n            error.name = \"InvalidBodyException\";\n            throw error;\n        }\n    }\n\n    sinon.extend(FakeXMLHttpRequest.prototype, sinon.EventTarget, {\n        async: true,\n\n        open: function open(method, url, async, username, password) {\n            this.method = method;\n            this.url = url;\n            this.async = typeof async == \"boolean\" ? async : true;\n            this.username = username;\n            this.password = password;\n            this.responseText = null;\n            this.responseXML = null;\n            this.requestHeaders = {};\n            this.sendFlag = false;\n            if(sinon.FakeXMLHttpRequest.useFilters === true) {\n                var xhrArgs = arguments;\n                var defake = some(FakeXMLHttpRequest.filters,function(filter) {\n                    return filter.apply(this,xhrArgs)\n                });\n                if (defake) {\n                  return sinon.FakeXMLHttpRequest.defake(this,arguments);\n                }\n            }\n            this.readyStateChange(FakeXMLHttpRequest.OPENED);\n        },\n\n        readyStateChange: function readyStateChange(state) {\n            this.readyState = state;\n\n            if (typeof this.onreadystatechange == \"function\") {\n                try {\n                    this.onreadystatechange();\n                } catch (e) {\n                    sinon.logError(\"Fake XHR onreadystatechange handler\", e);\n                }\n            }\n\n            this.dispatchEvent(new sinon.Event(\"readystatechange\"));\n\n            switch (this.readyState) {\n                case FakeXMLHttpRequest.DONE:\n                    this.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                    this.dispatchEvent(new sinon.Event(\"loadend\", false, false, this));\n                    this.upload.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                    if (supportsProgress) {\n                        this.upload.dispatchEvent(new sinon.ProgressEvent('progress', {loaded: 100, total: 100}));\n                    }\n                    break;\n            }\n        },\n\n        setRequestHeader: function setRequestHeader(header, value) {\n            verifyState(this);\n\n            if (unsafeHeaders[header] || /^(Sec-|Proxy-)/.test(header)) {\n                throw new Error(\"Refused to set unsafe header \\\"\" + header + \"\\\"\");\n            }\n\n            if (this.requestHeaders[header]) {\n                this.requestHeaders[header] += \",\" + value;\n            } else {\n                this.requestHeaders[header] = value;\n            }\n        },\n\n        // Helps testing\n        setResponseHeaders: function setResponseHeaders(headers) {\n            verifyRequestOpened(this);\n            this.responseHeaders = {};\n\n            for (var header in headers) {\n                if (headers.hasOwnProperty(header)) {\n                    this.responseHeaders[header] = headers[header];\n                }\n            }\n\n            if (this.async) {\n                this.readyStateChange(FakeXMLHttpRequest.HEADERS_RECEIVED);\n            } else {\n                this.readyState = FakeXMLHttpRequest.HEADERS_RECEIVED;\n            }\n        },\n\n        // Currently treats ALL data as a DOMString (i.e. no Document)\n        send: function send(data) {\n            verifyState(this);\n\n            if (!/^(get|head)$/i.test(this.method)) {\n                if (this.requestHeaders[\"Content-Type\"]) {\n                    var value = this.requestHeaders[\"Content-Type\"].split(\";\");\n                    this.requestHeaders[\"Content-Type\"] = value[0] + \";charset=utf-8\";\n                } else {\n                    this.requestHeaders[\"Content-Type\"] = \"text/plain;charset=utf-8\";\n                }\n\n                this.requestBody = data;\n            }\n\n            this.errorFlag = false;\n            this.sendFlag = this.async;\n            this.readyStateChange(FakeXMLHttpRequest.OPENED);\n\n            if (typeof this.onSend == \"function\") {\n                this.onSend(this);\n            }\n\n            this.dispatchEvent(new sinon.Event(\"loadstart\", false, false, this));\n        },\n\n        abort: function abort() {\n            this.aborted = true;\n            this.responseText = null;\n            this.errorFlag = true;\n            this.requestHeaders = {};\n\n            if (this.readyState > sinon.FakeXMLHttpRequest.UNSENT && this.sendFlag) {\n                this.readyStateChange(sinon.FakeXMLHttpRequest.DONE);\n                this.sendFlag = false;\n            }\n\n            this.readyState = sinon.FakeXMLHttpRequest.UNSENT;\n\n            this.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n\n            this.upload.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n\n            if (typeof this.onerror === \"function\") {\n                this.onerror();\n            }\n        },\n\n        getResponseHeader: function getResponseHeader(header) {\n            if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                return null;\n            }\n\n            if (/^Set-Cookie2?$/i.test(header)) {\n                return null;\n            }\n\n            header = header.toLowerCase();\n\n            for (var h in this.responseHeaders) {\n                if (h.toLowerCase() == header) {\n                    return this.responseHeaders[h];\n                }\n            }\n\n            return null;\n        },\n\n        getAllResponseHeaders: function getAllResponseHeaders() {\n            if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                return \"\";\n            }\n\n            var headers = \"\";\n\n            for (var header in this.responseHeaders) {\n                if (this.responseHeaders.hasOwnProperty(header) &&\n                    !/^Set-Cookie2?$/i.test(header)) {\n                    headers += header + \": \" + this.responseHeaders[header] + \"\\r\\n\";\n                }\n            }\n\n            return headers;\n        },\n\n        setResponseBody: function setResponseBody(body) {\n            verifyRequestSent(this);\n            verifyHeadersReceived(this);\n            verifyResponseBodyType(body);\n\n            var chunkSize = this.chunkSize || 10;\n            var index = 0;\n            this.responseText = \"\";\n\n            do {\n                if (this.async) {\n                    this.readyStateChange(FakeXMLHttpRequest.LOADING);\n                }\n\n                this.responseText += body.substring(index, index + chunkSize);\n                index += chunkSize;\n            } while (index < body.length);\n\n            var type = this.getResponseHeader(\"Content-Type\");\n\n            if (this.responseText &&\n                (!type || /(text\\/xml)|(application\\/xml)|(\\+xml)/.test(type))) {\n                try {\n                    this.responseXML = FakeXMLHttpRequest.parseXML(this.responseText);\n                } catch (e) {\n                    // Unable to parse XML - no biggie\n                }\n            }\n\n            if (this.async) {\n                this.readyStateChange(FakeXMLHttpRequest.DONE);\n            } else {\n                this.readyState = FakeXMLHttpRequest.DONE;\n            }\n        },\n\n        respond: function respond(status, headers, body) {\n            this.status = typeof status == \"number\" ? status : 200;\n            this.statusText = FakeXMLHttpRequest.statusCodes[this.status];\n            this.setResponseHeaders(headers || {});\n            this.setResponseBody(body || \"\");\n        },\n\n        uploadProgress: function uploadProgress(progressEventRaw) {\n            if (supportsProgress) {\n                this.upload.dispatchEvent(new sinon.ProgressEvent(\"progress\", progressEventRaw));\n            }\n        },\n\n        uploadError: function uploadError(error) {\n            if (supportsCustomEvent) {\n                this.upload.dispatchEvent(new sinon.CustomEvent(\"error\", {\"detail\": error}));\n            }\n        }\n    });\n\n    sinon.extend(FakeXMLHttpRequest, {\n        UNSENT: 0,\n        OPENED: 1,\n        HEADERS_RECEIVED: 2,\n        LOADING: 3,\n        DONE: 4\n    });\n\n    // Borrowed from JSpec\n    FakeXMLHttpRequest.parseXML = function parseXML(text) {\n        var xmlDoc;\n\n        if (typeof DOMParser != \"undefined\") {\n            var parser = new DOMParser();\n            xmlDoc = parser.parseFromString(text, \"text/xml\");\n        } else {\n            xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\n            xmlDoc.async = \"false\";\n            xmlDoc.loadXML(text);\n        }\n\n        return xmlDoc;\n    };\n\n    FakeXMLHttpRequest.statusCodes = {\n        100: \"Continue\",\n        101: \"Switching Protocols\",\n        200: \"OK\",\n        201: \"Created\",\n        202: \"Accepted\",\n        203: \"Non-Authoritative Information\",\n        204: \"No Content\",\n        205: \"Reset Content\",\n        206: \"Partial Content\",\n        300: \"Multiple Choice\",\n        301: \"Moved Permanently\",\n        302: \"Found\",\n        303: \"See Other\",\n        304: \"Not Modified\",\n        305: \"Use Proxy\",\n        307: \"Temporary Redirect\",\n        400: \"Bad Request\",\n        401: \"Unauthorized\",\n        402: \"Payment Required\",\n        403: \"Forbidden\",\n        404: \"Not Found\",\n        405: \"Method Not Allowed\",\n        406: \"Not Acceptable\",\n        407: \"Proxy Authentication Required\",\n        408: \"Request Timeout\",\n        409: \"Conflict\",\n        410: \"Gone\",\n        411: \"Length Required\",\n        412: \"Precondition Failed\",\n        413: \"Request Entity Too Large\",\n        414: \"Request-URI Too Long\",\n        415: \"Unsupported Media Type\",\n        416: \"Requested Range Not Satisfiable\",\n        417: \"Expectation Failed\",\n        422: \"Unprocessable Entity\",\n        500: \"Internal Server Error\",\n        501: \"Not Implemented\",\n        502: \"Bad Gateway\",\n        503: \"Service Unavailable\",\n        504: \"Gateway Timeout\",\n        505: \"HTTP Version Not Supported\"\n    };\n\n    sinon.useFakeXMLHttpRequest = function () {\n        sinon.FakeXMLHttpRequest.restore = function restore(keepOnCreate) {\n            if (xhr.supportsXHR) {\n                global.XMLHttpRequest = xhr.GlobalXMLHttpRequest;\n            }\n\n            if (xhr.supportsActiveX) {\n                global.ActiveXObject = xhr.GlobalActiveXObject;\n            }\n\n            delete sinon.FakeXMLHttpRequest.restore;\n\n            if (keepOnCreate !== true) {\n                delete sinon.FakeXMLHttpRequest.onCreate;\n            }\n        };\n        if (xhr.supportsXHR) {\n            global.XMLHttpRequest = sinon.FakeXMLHttpRequest;\n        }\n\n        if (xhr.supportsActiveX) {\n            global.ActiveXObject = function ActiveXObject(objId) {\n                if (objId == \"Microsoft.XMLHTTP\" || /^Msxml2\\.XMLHTTP/i.test(objId)) {\n\n                    return new sinon.FakeXMLHttpRequest();\n                }\n\n                return new xhr.GlobalActiveXObject(objId);\n            };\n        }\n\n        return sinon.FakeXMLHttpRequest;\n    };\n\n    sinon.FakeXMLHttpRequest = FakeXMLHttpRequest;\n\n})(typeof global === \"object\" ? global : this);\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = sinon;\n}\n\n/**\n * @depend fake_xml_http_request.js\n */\n/*jslint eqeqeq: false, onevar: false, regexp: false, plusplus: false*/\n/*global module, require, window*/\n/**\n * The Sinon \"server\" mimics a web server that receives requests from\n * sinon.FakeXMLHttpRequest and provides an API to respond to those requests,\n * both synchronously and asynchronously. To respond synchronously, canned\n * answers have to be provided upfront.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nif (typeof sinon == \"undefined\") {\n    var sinon = {};\n}\n\nsinon.fakeServer = (function () {\n    var push = [].push;\n    function F() {}\n\n    function create(proto) {\n        F.prototype = proto;\n        return new F();\n    }\n\n    function responseArray(handler) {\n        var response = handler;\n\n        if (Object.prototype.toString.call(handler) != \"[object Array]\") {\n            response = [200, {}, handler];\n        }\n\n        if (typeof response[2] != \"string\") {\n            throw new TypeError(\"Fake server response body should be string, but was \" +\n                                typeof response[2]);\n        }\n\n        return response;\n    }\n\n    var wloc = typeof window !== \"undefined\" ? window.location : {};\n    var rCurrLoc = new RegExp(\"^\" + wloc.protocol + \"//\" + wloc.host);\n\n    function matchOne(response, reqMethod, reqUrl) {\n        var rmeth = response.method;\n        var matchMethod = !rmeth || rmeth.toLowerCase() == reqMethod.toLowerCase();\n        var url = response.url;\n        var matchUrl = !url || url == reqUrl || (typeof url.test == \"function\" && url.test(reqUrl));\n\n        return matchMethod && matchUrl;\n    }\n\n    function match(response, request) {\n        var requestUrl = request.url;\n\n        if (!/^https?:\\/\\//.test(requestUrl) || rCurrLoc.test(requestUrl)) {\n            requestUrl = requestUrl.replace(rCurrLoc, \"\");\n        }\n\n        if (matchOne(response, this.getHTTPMethod(request), requestUrl)) {\n            if (typeof response.response == \"function\") {\n                var ru = response.url;\n                var args = [request].concat(ru && typeof ru.exec == \"function\" ? ru.exec(requestUrl).slice(1) : []);\n                return response.response.apply(response, args);\n            }\n\n            return true;\n        }\n\n        return false;\n    }\n\n    function log(response, request) {\n        var str;\n\n        str =  \"Request:\\n\"  + sinon.format(request)  + \"\\n\\n\";\n        str += \"Response:\\n\" + sinon.format(response) + \"\\n\\n\";\n\n        sinon.log(str);\n    }\n\n    return {\n        create: function () {\n            var server = create(this);\n            this.xhr = sinon.useFakeXMLHttpRequest();\n            server.requests = [];\n\n            this.xhr.onCreate = function (xhrObj) {\n                server.addRequest(xhrObj);\n            };\n\n            return server;\n        },\n\n        addRequest: function addRequest(xhrObj) {\n            var server = this;\n            push.call(this.requests, xhrObj);\n\n            xhrObj.onSend = function () {\n                server.handleRequest(this);\n\n                if (server.autoRespond && !server.responding) {\n                    setTimeout(function () {\n                        server.responding = false;\n                        server.respond();\n                    }, server.autoRespondAfter || 10);\n\n                    server.responding = true;\n                }\n            };\n        },\n\n        getHTTPMethod: function getHTTPMethod(request) {\n            if (this.fakeHTTPMethods && /post/i.test(request.method)) {\n                var matches = (request.requestBody || \"\").match(/_method=([^\\b;]+)/);\n                return !!matches ? matches[1] : request.method;\n            }\n\n            return request.method;\n        },\n\n        handleRequest: function handleRequest(xhr) {\n            if (xhr.async) {\n                if (!this.queue) {\n                    this.queue = [];\n                }\n\n                push.call(this.queue, xhr);\n            } else {\n                this.processRequest(xhr);\n            }\n        },\n\n        respondWith: function respondWith(method, url, body) {\n            if (arguments.length == 1 && typeof method != \"function\") {\n                this.response = responseArray(method);\n                return;\n            }\n\n            if (!this.responses) { this.responses = []; }\n\n            if (arguments.length == 1) {\n                body = method;\n                url = method = null;\n            }\n\n            if (arguments.length == 2) {\n                body = url;\n                url = method;\n                method = null;\n            }\n\n            push.call(this.responses, {\n                method: method,\n                url: url,\n                response: typeof body == \"function\" ? body : responseArray(body)\n            });\n        },\n\n        respond: function respond() {\n            if (arguments.length > 0) this.respondWith.apply(this, arguments);\n            var queue = this.queue || [];\n            var requests = queue.splice(0, queue.length);\n            var request;\n\n            while(request = requests.shift()) {\n                this.processRequest(request);\n            }\n        },\n\n        processRequest: function processRequest(request) {\n            try {\n                if (request.aborted) {\n                    return;\n                }\n\n                var response = this.response || [404, {}, \"\"];\n\n                if (this.responses) {\n                    for (var l = this.responses.length, i = l - 1; i >= 0; i--) {\n                        if (match.call(this, this.responses[i], request)) {\n                            response = this.responses[i].response;\n                            break;\n                        }\n                    }\n                }\n\n                if (request.readyState != 4) {\n                    log(response, request);\n\n                    request.respond(response[0], response[1], response[2]);\n                }\n            } catch (e) {\n                sinon.logError(\"Fake server request processing\", e);\n            }\n        },\n\n        restore: function restore() {\n            return this.xhr.restore && this.xhr.restore.apply(this.xhr, arguments);\n        }\n    };\n}());\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = sinon;\n}\n\n/**\n * @depend fake_server.js\n * @depend fake_timers.js\n */\n/*jslint browser: true, eqeqeq: false, onevar: false*/\n/*global sinon*/\n/**\n * Add-on for sinon.fakeServer that automatically handles a fake timer along with\n * the FakeXMLHttpRequest. The direct inspiration for this add-on is jQuery\n * 1.3.x, which does not use xhr object's onreadystatehandler at all - instead,\n * it polls the object for completion with setInterval. Despite the direct\n * motivation, there is nothing jQuery-specific in this file, so it can be used\n * in any environment where the ajax implementation depends on setInterval or\n * setTimeout.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function () {\n    function Server() {}\n    Server.prototype = sinon.fakeServer;\n\n    sinon.fakeServerWithClock = new Server();\n\n    sinon.fakeServerWithClock.addRequest = function addRequest(xhr) {\n        if (xhr.async) {\n            if (typeof setTimeout.clock == \"object\") {\n                this.clock = setTimeout.clock;\n            } else {\n                this.clock = sinon.useFakeTimers();\n                this.resetClock = true;\n            }\n\n            if (!this.longestTimeout) {\n                var clockSetTimeout = this.clock.setTimeout;\n                var clockSetInterval = this.clock.setInterval;\n                var server = this;\n\n                this.clock.setTimeout = function (fn, timeout) {\n                    server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                    return clockSetTimeout.apply(this, arguments);\n                };\n\n                this.clock.setInterval = function (fn, timeout) {\n                    server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                    return clockSetInterval.apply(this, arguments);\n                };\n            }\n        }\n\n        return sinon.fakeServer.addRequest.call(this, xhr);\n    };\n\n    sinon.fakeServerWithClock.respond = function respond() {\n        var returnVal = sinon.fakeServer.respond.apply(this, arguments);\n\n        if (this.clock) {\n            this.clock.tick(this.longestTimeout || 0);\n            this.longestTimeout = 0;\n\n            if (this.resetClock) {\n                this.clock.restore();\n                this.resetClock = false;\n            }\n        }\n\n        return returnVal;\n    };\n\n    sinon.fakeServerWithClock.restore = function restore() {\n        if (this.clock) {\n            this.clock.restore();\n        }\n\n        return sinon.fakeServer.restore.apply(this, arguments);\n    };\n}());\n\n/**\n * @depend ../sinon.js\n * @depend collection.js\n * @depend util/fake_timers.js\n * @depend util/fake_server_with_clock.js\n */\n/*jslint eqeqeq: false, onevar: false, plusplus: false*/\n/*global require, module*/\n/**\n * Manages fake collections as well as fake utilities such as Sinon's\n * timers and fake XHR implementation in one convenient object.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nif (typeof module !== 'undefined' && module.exports) {\n    var sinon = require(\"../sinon\");\n    sinon.extend(sinon, require(\"./util/fake_timers\"));\n}\n\n(function () {\n    var push = [].push;\n\n    function exposeValue(sandbox, config, key, value) {\n        if (!value) {\n            return;\n        }\n\n        if (config.injectInto && !(key in config.injectInto)) {\n            config.injectInto[key] = value;\n            sandbox.injectedKeys.push(key);\n        } else {\n            push.call(sandbox.args, value);\n        }\n    }\n\n    function prepareSandboxFromConfig(config) {\n        var sandbox = sinon.create(sinon.sandbox);\n\n        if (config.useFakeServer) {\n            if (typeof config.useFakeServer == \"object\") {\n                sandbox.serverPrototype = config.useFakeServer;\n            }\n\n            sandbox.useFakeServer();\n        }\n\n        if (config.useFakeTimers) {\n            if (typeof config.useFakeTimers == \"object\") {\n                sandbox.useFakeTimers.apply(sandbox, config.useFakeTimers);\n            } else {\n                sandbox.useFakeTimers();\n            }\n        }\n\n        return sandbox;\n    }\n\n    sinon.sandbox = sinon.extend(sinon.create(sinon.collection), {\n        useFakeTimers: function useFakeTimers() {\n            this.clock = sinon.useFakeTimers.apply(sinon, arguments);\n\n            return this.add(this.clock);\n        },\n\n        serverPrototype: sinon.fakeServer,\n\n        useFakeServer: function useFakeServer() {\n            var proto = this.serverPrototype || sinon.fakeServer;\n\n            if (!proto || !proto.create) {\n                return null;\n            }\n\n            this.server = proto.create();\n            return this.add(this.server);\n        },\n\n        inject: function (obj) {\n            sinon.collection.inject.call(this, obj);\n\n            if (this.clock) {\n                obj.clock = this.clock;\n            }\n\n            if (this.server) {\n                obj.server = this.server;\n                obj.requests = this.server.requests;\n            }\n\n            return obj;\n        },\n\n        restore: function () {\n            sinon.collection.restore.apply(this, arguments);\n            this.restoreContext();\n        },\n\n        restoreContext: function () {\n            if (this.injectedKeys) {\n                for (var i = 0, j = this.injectedKeys.length; i < j; i++) {\n                    delete this.injectInto[this.injectedKeys[i]];\n                }\n                this.injectedKeys = [];\n            }\n        },\n\n        create: function (config) {\n            if (!config) {\n                return sinon.create(sinon.sandbox);\n            }\n\n            var sandbox = prepareSandboxFromConfig(config);\n            sandbox.args = sandbox.args || [];\n            sandbox.injectedKeys = [];\n            sandbox.injectInto = config.injectInto;\n            var prop, value, exposed = sandbox.inject({});\n\n            if (config.properties) {\n                for (var i = 0, l = config.properties.length; i < l; i++) {\n                    prop = config.properties[i];\n                    value = exposed[prop] || prop == \"sandbox\" && sandbox;\n                    exposeValue(sandbox, config, prop, value);\n                }\n            } else {\n                exposeValue(sandbox, config, \"sandbox\", value);\n            }\n\n            return sandbox;\n        }\n    });\n\n    sinon.sandbox.useFakeXMLHttpRequest = sinon.sandbox.useFakeServer;\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = sinon.sandbox;\n    }\n}());\n\n/**\n * @depend ../sinon.js\n * @depend stub.js\n * @depend mock.js\n * @depend sandbox.js\n */\n/*jslint eqeqeq: false, onevar: false, forin: true, plusplus: false*/\n/*global module, require, sinon*/\n/**\n * Test function, sandboxes fakes\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function test(callback) {\n        var type = typeof callback;\n\n        if (type != \"function\") {\n            throw new TypeError(\"sinon.test needs to wrap a test function, got \" + type);\n        }\n\n        return function () {\n            var config = sinon.getConfig(sinon.config);\n            config.injectInto = config.injectIntoThis && this || config.injectInto;\n            var sandbox = sinon.sandbox.create(config);\n            var exception, result;\n            var args = Array.prototype.slice.call(arguments).concat(sandbox.args);\n\n            try {\n                result = callback.apply(this, args);\n            } catch (e) {\n                exception = e;\n            }\n\n            if (typeof exception !== \"undefined\") {\n                sandbox.restore();\n                throw exception;\n            }\n            else {\n                sandbox.verifyAndRestore();\n            }\n\n            return result;\n        };\n    }\n\n    test.config = {\n        injectIntoThis: true,\n        injectInto: null,\n        properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"server\", \"requests\"],\n        useFakeTimers: true,\n        useFakeServer: true\n    };\n\n    if (commonJSModule) {\n        module.exports = test;\n    } else {\n        sinon.test = test;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n * @depend test.js\n */\n/*jslint eqeqeq: false, onevar: false, eqeqeq: false*/\n/*global module, require, sinon*/\n/**\n * Test case, sandboxes all test functions\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon || !Object.prototype.hasOwnProperty) {\n        return;\n    }\n\n    function createTest(property, setUp, tearDown) {\n        return function () {\n            if (setUp) {\n                setUp.apply(this, arguments);\n            }\n\n            var exception, result;\n\n            try {\n                result = property.apply(this, arguments);\n            } catch (e) {\n                exception = e;\n            }\n\n            if (tearDown) {\n                tearDown.apply(this, arguments);\n            }\n\n            if (exception) {\n                throw exception;\n            }\n\n            return result;\n        };\n    }\n\n    function testCase(tests, prefix) {\n        /*jsl:ignore*/\n        if (!tests || typeof tests != \"object\") {\n            throw new TypeError(\"sinon.testCase needs an object with test functions\");\n        }\n        /*jsl:end*/\n\n        prefix = prefix || \"test\";\n        var rPrefix = new RegExp(\"^\" + prefix);\n        var methods = {}, testName, property, method;\n        var setUp = tests.setUp;\n        var tearDown = tests.tearDown;\n\n        for (testName in tests) {\n            if (tests.hasOwnProperty(testName)) {\n                property = tests[testName];\n\n                if (/^(setUp|tearDown)$/.test(testName)) {\n                    continue;\n                }\n\n                if (typeof property == \"function\" && rPrefix.test(testName)) {\n                    method = property;\n\n                    if (setUp || tearDown) {\n                        method = createTest(property, setUp, tearDown);\n                    }\n\n                    methods[testName] = sinon.test(method);\n                } else {\n                    methods[testName] = tests[testName];\n                }\n            }\n        }\n\n        return methods;\n    }\n\n    if (commonJSModule) {\n        module.exports = testCase;\n    } else {\n        sinon.testCase = testCase;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n * @depend stub.js\n */\n/*jslint eqeqeq: false, onevar: false, nomen: false, plusplus: false*/\n/*global module, require, sinon*/\n/**\n * Assertions matching the test spy retrieval interface.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon, global) {\n    var commonJSModule = typeof module !== \"undefined\" && module.exports;\n    var slice = Array.prototype.slice;\n    var assert;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function verifyIsStub() {\n        var method;\n\n        for (var i = 0, l = arguments.length; i < l; ++i) {\n            method = arguments[i];\n\n            if (!method) {\n                assert.fail(\"fake is not a spy\");\n            }\n\n            if (typeof method != \"function\") {\n                assert.fail(method + \" is not a function\");\n            }\n\n            if (typeof method.getCall != \"function\") {\n                assert.fail(method + \" is not stubbed\");\n            }\n        }\n    }\n\n    function failAssertion(object, msg) {\n        object = object || global;\n        var failMethod = object.fail || assert.fail;\n        failMethod.call(object, msg);\n    }\n\n    function mirrorPropAsAssertion(name, method, message) {\n        if (arguments.length == 2) {\n            message = method;\n            method = name;\n        }\n\n        assert[name] = function (fake) {\n            verifyIsStub(fake);\n\n            var args = slice.call(arguments, 1);\n            var failed = false;\n\n            if (typeof method == \"function\") {\n                failed = !method(fake);\n            } else {\n                failed = typeof fake[method] == \"function\" ?\n                    !fake[method].apply(fake, args) : !fake[method];\n            }\n\n            if (failed) {\n                failAssertion(this, fake.printf.apply(fake, [message].concat(args)));\n            } else {\n                assert.pass(name);\n            }\n        };\n    }\n\n    function exposedName(prefix, prop) {\n        return !prefix || /^fail/.test(prop) ? prop :\n            prefix + prop.slice(0, 1).toUpperCase() + prop.slice(1);\n    }\n\n    assert = {\n        failException: \"AssertError\",\n\n        fail: function fail(message) {\n            var error = new Error(message);\n            error.name = this.failException || assert.failException;\n\n            throw error;\n        },\n\n        pass: function pass(assertion) {},\n\n        callOrder: function assertCallOrder() {\n            verifyIsStub.apply(null, arguments);\n            var expected = \"\", actual = \"\";\n\n            if (!sinon.calledInOrder(arguments)) {\n                try {\n                    expected = [].join.call(arguments, \", \");\n                    var calls = slice.call(arguments);\n                    var i = calls.length;\n                    while (i) {\n                        if (!calls[--i].called) {\n                            calls.splice(i, 1);\n                        }\n                    }\n                    actual = sinon.orderByFirstCall(calls).join(\", \");\n                } catch (e) {\n                    // If this fails, we'll just fall back to the blank string\n                }\n\n                failAssertion(this, \"expected \" + expected + \" to be \" +\n                              \"called in order but were called as \" + actual);\n            } else {\n                assert.pass(\"callOrder\");\n            }\n        },\n\n        callCount: function assertCallCount(method, count) {\n            verifyIsStub(method);\n\n            if (method.callCount != count) {\n                var msg = \"expected %n to be called \" + sinon.timesInWords(count) +\n                    \" but was called %c%C\";\n                failAssertion(this, method.printf(msg));\n            } else {\n                assert.pass(\"callCount\");\n            }\n        },\n\n        expose: function expose(target, options) {\n            if (!target) {\n                throw new TypeError(\"target is null or undefined\");\n            }\n\n            var o = options || {};\n            var prefix = typeof o.prefix == \"undefined\" && \"assert\" || o.prefix;\n            var includeFail = typeof o.includeFail == \"undefined\" || !!o.includeFail;\n\n            for (var method in this) {\n                if (method != \"export\" && (includeFail || !/^(fail)/.test(method))) {\n                    target[exposedName(prefix, method)] = this[method];\n                }\n            }\n\n            return target;\n        },\n\n        match: function match(actual, expectation) {\n            var matcher = sinon.match(expectation);\n            if (matcher.test(actual)) {\n                assert.pass(\"match\");\n            } else {\n                var formatted = [\n                    \"expected value to match\",\n                    \"    expected = \" + sinon.format(expectation),\n                    \"    actual = \" + sinon.format(actual)\n                ]\n                failAssertion(this, formatted.join(\"\\n\"));\n            }\n        }\n    };\n\n    mirrorPropAsAssertion(\"called\", \"expected %n to have been called at least once but was never called\");\n    mirrorPropAsAssertion(\"notCalled\", function (spy) { return !spy.called; },\n                          \"expected %n to not have been called but was called %c%C\");\n    mirrorPropAsAssertion(\"calledOnce\", \"expected %n to be called once but was called %c%C\");\n    mirrorPropAsAssertion(\"calledTwice\", \"expected %n to be called twice but was called %c%C\");\n    mirrorPropAsAssertion(\"calledThrice\", \"expected %n to be called thrice but was called %c%C\");\n    mirrorPropAsAssertion(\"calledOn\", \"expected %n to be called with %1 as this but was called with %t\");\n    mirrorPropAsAssertion(\"alwaysCalledOn\", \"expected %n to always be called with %1 as this but was called with %t\");\n    mirrorPropAsAssertion(\"calledWithNew\", \"expected %n to be called with new\");\n    mirrorPropAsAssertion(\"alwaysCalledWithNew\", \"expected %n to always be called with new\");\n    mirrorPropAsAssertion(\"calledWith\", \"expected %n to be called with arguments %*%C\");\n    mirrorPropAsAssertion(\"calledWithMatch\", \"expected %n to be called with match %*%C\");\n    mirrorPropAsAssertion(\"alwaysCalledWith\", \"expected %n to always be called with arguments %*%C\");\n    mirrorPropAsAssertion(\"alwaysCalledWithMatch\", \"expected %n to always be called with match %*%C\");\n    mirrorPropAsAssertion(\"calledWithExactly\", \"expected %n to be called with exact arguments %*%C\");\n    mirrorPropAsAssertion(\"alwaysCalledWithExactly\", \"expected %n to always be called with exact arguments %*%C\");\n    mirrorPropAsAssertion(\"neverCalledWith\", \"expected %n to never be called with arguments %*%C\");\n    mirrorPropAsAssertion(\"neverCalledWithMatch\", \"expected %n to never be called with match %*%C\");\n    mirrorPropAsAssertion(\"threw\", \"%n did not throw exception%C\");\n    mirrorPropAsAssertion(\"alwaysThrew\", \"%n did not always throw exception%C\");\n\n    if (commonJSModule) {\n        module.exports = assert;\n    } else {\n        sinon.assert = assert;\n    }\n}(typeof sinon == \"object\" && sinon || null, typeof window != \"undefined\" ? window : (typeof self != \"undefined\") ? self : global));\n\nreturn sinon;}.call(typeof window != 'undefined' && window || {}));\n/**\n * End of original code.\n */\n\n  // Every assertion in Sinon.JS fails by calling this method.\n  //\n  // (In fact, in vanilla Sinon.JS 1.0.0. this is not really the case,\n  //  because the \"fail\" method of the TestCase takes precedence over\n  // \"fail\" method of Sinon.JS)\n  //\n  // Instead of throwing an exception directly, delegate to the\n  // \"fail\" method of the TestCase. In Testrunner2, this means\n  // that the wrapped fail method is called and ensures that\n  // the entire body of each test function is executed.\n  //\n  this.sinon.assert.fail = function(msg) {\n    this.fail(msg, true);\n  };\n\n  // HTTP Status 207 is missing in map to resolve code to status text\n  this.sinon.FakeXMLHttpRequest.statusCodes[207] = \"Multi-Status\";\n\n\n  var origSinon = this.sinon;\n\n  // Expose to qooxdoo\n  var Sinon = qx.dev.unit.Sinon;\n  Sinon.getSinon = function() {\n    return origSinon;\n  };\n\n\n}).call(window);\n"
  ]
}